[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "『統計ソフト「R」超入門』",
    "section": "",
    "text": "1 環境構築\n本資料では2023年度データ分析勉強会の図書である『統計ソフト「R」超入門』逸見功著（以降、テキスト）で利用するR/R Commander環境を構築する方法を紹介しています。Windows環境のみが対象です。他のOSを利用したい場合はCRANにてインストール方法を確認してください。なお、本資料はR/R Commanderが動作することを保証するものではありません。\n環境構築前に下記の条件を満たしていることを確認してください。\n環境構築の手順は下記の通りです。"
  },
  {
    "objectID": "index.html#rのインストール",
    "href": "index.html#rのインストール",
    "title": "『統計ソフト「R」超入門』",
    "section": "1.1 Rのインストール",
    "text": "1.1 Rのインストール\n　テキストのP24から図解されていますので、図解が必要な場合はテキストを参照してください。\n\n1.1.1 ダウンロード\n　Rのインストーラーをダウンロードします。\n\nCRANからRの最新版インストーラをダウンロードします\nダウンロードしたファイルのウィルスチェックをします\n\n\n\n\n\n\n\nFYI: Version\n\n\n\n書籍と同じバージョンを利用したい場合にはこちらからR4.2.2をダウンロードしてください。\n\n\n\n\n1.1.2 インストール\n　Rのインストールではダイアログでの問い合わせに対して基本的にデフォルトを選択します。ただし、R Commnderを使いやすくするために起動時オプションの選択だけはデフォルトから変更します。\n\nダウンロードしたファイル（インストーラ）を実行\n\n以降、ウィザード形式の指示に従う\n\nインストール言語を選択\nライセンスを確認\nインストール先を指定\nコンポーネントを選択\n起動時オプションを選択\n\n「はい(カスタマイズする)」を選択\n\n\n\n表示モード\n\n「SDI(複数のウィンドウを使用して表示)」3を選択\n\n\nヘルプの表示方法\n\n「HTMLヘルプ」4を選択\n\n\n\nスタートメニューフォルダーの指定\n追加タスクの選択\n\n「アイコンの追加」はお好みで選択\n\nインストール状況（プログレス表示）\n完了\n\n3 カスタマイズせずにデフォルトインストールした場合は下記のリカバリーを参考にSDIモードに変更してください4 ヘルプの表示方法は好みで構いませんがHTML形式の方が関連項目のリンクが使えるので便利です\n\n\n\n\n\nFYI: MDI or SDI\n\n\n\nR Commanderを利用する場合は、操作ウィンドウやグラフ表示に個々のウィンドウを割り当てるSDIモードが便利です。インストール時にMDIを選択してた場合でもR起動後にオプションで変更できます。\n\n\n\n\n1.1.3 起動確認\n　スタートメニューから［R］-［R 4.x.x］を実行し下図5のようなウィンドウが表示されることを確認します。5 図はR4.3.0でバージョンにより表記が変わります。\n\n\n\nR Console\n\n\n　RのウィンドウはそのままでR Commanderのインストールに進みます。\n\n\n1.1.4 リカバリー（SDIモードへの変更）\n　MDIモードでインストールした場合は下記の手順でSDIモードに変更してください。\n\nRのメニューから［編集］-［GUIプリファレンス…］を実行して設定エディタダイアログを開く\n\n\n最上段にある［Sigle or multiple］で「SDI」にチェックを入れ［OK］ボタンをクリックする\n\nRを再起動する"
  },
  {
    "objectID": "index.html#r-commanderのインストール",
    "href": "index.html#r-commanderのインストール",
    "title": "『統計ソフト「R」超入門』",
    "section": "1.2 R Commanderのインストール",
    "text": "1.2 R Commanderのインストール\n　テキストのP28から図解されていますので、図解が必要な場合はテキストを参照してください。\n\n1.2.1 インストール\n　R Commanderは単独のプログラムではなくRのパッケージ（ライブラリ）として動く機能拡張プログラムですので、インストールはRから行います。\n\nRのメニューから［パッケージ］-［パッケージのインストール…］を実行\nパッケージをダウンロードするミラーサイトを選択して［OK］をクリック\n\nデフォルトの「0-Cloud[https]」を選択\n\nパッケージ一覧から「Rcmdr」を選択して［OK］をクリック\nパーソナルライブラリの利用確認\n\n初回のみで［はい(Y)］をクリック\n\nインストール先の確認\n\n初回のみで［はい(Y)］をクリック\n\nパッケージダウンロードのプログレスが複数表示\n\nなにもしない\n\nR Commanderインストール完了\n\n\n\n\nR Console\n\n\n\n\n\n\n\n\nFYI: Compile?\n\n\n\nパッケージのインストール中に「パッケージのソースからインストールを行いますか？」のようなメッセージが表示された場合は「いいえ(No)」を選択してください。今回構築するWindows環境ではソースからのインストールに対応していません。なお、このメッセージはCRANのパッケージ更新状況によるので表示されない場合もあります。\n\n\n\n\n1.2.2 起動確認\n　R Commanderが起動することを確認します。\n\nRのメニューから［パッケージ］-［パッケージの読み込み…］を実行\n「Rcmdr」を選択\n不足パッケージのインストール\n\n初回のみ\n\nダウンロード先の選択\n\nデフォルトの「CRAN」を選択\n\nR Commander起動\n\n\n\n\nR Commander"
  },
  {
    "objectID": "index.html#動作確認",
    "href": "index.html#動作確認",
    "title": "『統計ソフト「R」超入門』",
    "section": "1.3 動作確認",
    "text": "1.3 動作確認\n　以下はR Commanderウィンドウでの操作になります。\n\nメニューバーの下にある［データセット:］の部分が「&lt;アクティブデータセットなし&gt;」になっていることを確認\nメニューから［データ］-［パッケージ内のデータ］-［アタッチされたパッケージからデータセットを読み込む…］を実行\n［データセット名を入力:］欄に「iris」と入力し［OK］をクリック\nメニューバーの下にある［データセット:］の部分が「iris」になっていることを確認\nメニューから［グラフ］-［箱ひげ図…］を実行\n［変数］の「Petal.Length」をクリックし［OK］をクリック\n別ウィンドウで箱ひげ図が描かれることを確認\n\n\n\n\nR Commander"
  },
  {
    "objectID": "index.html#留意事項",
    "href": "index.html#留意事項",
    "title": "『統計ソフト「R」超入門』",
    "section": "1.4 留意事項",
    "text": "1.4 留意事項\n　Rを起動すると下記のメッセージが表示されるように利用やその結果に対しては誰も何も保証することはありません。\n\nR は、自由なソフトウェアであり、「完全に無保証」です。\n\n　したがって、利用に際しては結果などに疑問を感じた場合に自ら検証できる基本的な知識は必要です。"
  },
  {
    "objectID": "dataset.html#データセットとは",
    "href": "dataset.html#データセットとは",
    "title": "\n2  データセット\n",
    "section": "\n2.1 データセットとは",
    "text": "2.1 データセットとは\n　Rにおけるデータセットとは分析対象となるデータの集まりを意味します。例えば、下表のような車の諸元をまとめたものはデータセットのひとつです。\n\n\n\n\n  \n\n\n\n　\n　表計算ソフト(Excel)と比較すると下表のようなイメージになります。\n\n\n\n\n\n\n\n\n　\nR\nExcel\n備考\n\n\n\n処理部\nR\nExcel\nインタプリタ1\n\n\n\nデータ\nデータセット\nシート\n数式・書式を含まないもの\n\n\nGUI\nR/Rcmdr2\n\nExcel\nWindows版Rは簡単なGUIあり\n\n\nスクリプト\nR Script\nVBA\n\n\n\n機能拡張\nパッケージ\nアドオン\n\n\n\n\n1 動きを見ている限りExcelはセルでのイベント駆動によるインタプリタ処理だと思われます2 R Commanderの実装としてはパッケージ　各シート単位で様々な計算やグラフ作成ができるのがR Commander(Rcmdr)だと思ってください。\n　Rではデータセットはdata.frame型という変数型を用いて一つの変数として扱います。data.frame型変数はTidy data（整然データ）3という概念を満たす変数型です。3 Wikipedia\n\n\n\n\n\n\nFYI: Tidy data（整然データ）\n\n\n\n以下の条件を満たす表型のデータをTidy dataといい、構造と意味が合致しているのが特徴です。\n　1. 個々の変数が一つの列をなす\n　2. 個々の観測が一つの行をなす\n　3. 個々の値が一つのセルをなす\n　4. 個々の観測の構成単位の累計が一つの表をなす\nなので、神ExcelはTidy dataにはなりませんのでRでそのまま扱うことはできません。\n\n\n\n2.1.1 data.frame型\n　data.frame型変数は下記のような構造を取ります。特徴的なのは一つの変数（データセット）で複数の変数を扱うことができる点です。前出の車両諸元に関するデータセットでは11個の実数型変数（num）からなる32組の観測（車種）を持っています。\n\n\n'data.frame':   32 obs. of  11 variables:\n $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...\n $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...\n $ disp: num  160 160 108 258 360 ...\n $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...\n $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...\n $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...\n $ qsec: num  16.5 17 18.6 19.4 17 ...\n $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...\n $ am  : num  1 1 1 0 0 0 0 0 0 0 ...\n $ gear: num  4 4 4 3 3 3 3 4 4 4 ...\n $ carb: num  4 4 1 1 2 1 4 2 2 4 ...\n\n\n　data.frame型変数では実数型以外にも整数型・文字型・論理型・日付型・因子型などの様々な変数を混在させることが可能です。"
  },
  {
    "objectID": "dataset.html#組み込みデータセット",
    "href": "dataset.html#組み込みデータセット",
    "title": "\n2  データセット\n",
    "section": "\n2.2 組み込みデータセット",
    "text": "2.2 組み込みデータセット\n　組み込みデータセットはテキストP36のパッケージ付属データと同義です。標準で用意されているdatasetsパッケージは名前の通り様々なデータセットが組み込まれているパッケージです。代表的なデータセットを簡単に紹介しておきます。\n\n2.2.1 Iris flower data set\n　統計学の世界で最も有名な「フィッシャーのアヤメ」のデータセットです。三品種のアヤメの花の大きさを計測したデータで、萼片（Sepal）と花弁（Petal）の計測値が品種ごとに各50組、計150組が格納されています。品種（Species）は因子型と呼ばれる変数型になっており、層別処理を行う際に便利なようになっています。\n\nCodedatasets::iris\n\n\n\n\n\n\n  \n\n\n\n\n\n'data.frame':   150 obs. of  5 variables:\n $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...\n $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...\n $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...\n $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...\n $ Species     : Factor w/ 3 levels \"setosa\",\"versicolor\",..: 1 1 1 1 1 1 1 1 1 1 ...\n\n\n\n2.2.2 New York Air Quarity Measurements\n　テキストにも出てくる1973年5月から9月にかけてニューヨークで観測された大気データのデータセットで欠損値（欠測値）が含まれています。オゾン濃度、日射量、風速、気温の測定値と月、日のデータが格納されている一種の時系列のデータセットです。6変数のすべてが数値型ですが、整数型（int）と実数型（num）が混在しています。欠損値（欠測値）はNAと表示されます。\n\nCodedatasets::airquality\n\n\n\n\n\n\n  \n\n\n\n\n\n'data.frame':   153 obs. of  6 variables:\n $ Ozone  : int  41 36 12 18 NA 28 23 19 8 NA ...\n $ Solar.R: int  190 118 149 313 NA NA 299 99 19 194 ...\n $ Wind   : num  7.4 8 12.6 11.5 14.3 14.9 8.6 13.8 20.1 8.6 ...\n $ Temp   : int  67 72 74 62 56 66 65 59 61 69 ...\n $ Month  : int  5 5 5 5 5 5 5 5 5 5 ...\n $ Day    : int  1 2 3 4 5 6 7 8 9 10 ..."
  },
  {
    "objectID": "dataset.html#データセットを作成する",
    "href": "dataset.html#データセットを作成する",
    "title": "\n2  データセット\n",
    "section": "\n2.3 データセットを作成する",
    "text": "2.3 データセットを作成する\n　R Commanderにはデータセットを作成するための機能が組み込まれていますが、使いやすいとは言えないので、Excelのような表計算ソフトを使ってデータファイルを作成することをおすゝめします。R Commanderが対応している代表的なファイル形式はxls形式、xlsx形式、CSV形式です。変数名などに日本語が含まれるデータをCSV形式にする場合には必ずUTF-8エンコーディングを指定して保存してくださいください。\n　R CommanderのGUIによる読み込み処理ではエンコーディングが指定できないために日本語版Excelがデフォルトで書き出すシフトJISエンコーディングされたファイルには対応していません4。4 R 4.2からデフォルトロケール（エンコーディング）をシフトJISからUTF-8に変更したために起こる日本語版Windows特有の問題です\n\n2.3.1 R Commanderのためのデータセット\n　R CommanderではGUI操作の弊害で様々なオプションの指定ができないためエンコーディング以外に下記の条件を満たすファイルを作成することで読み込み時のエラーを回避するようにしてください。\n\nTidy data形式を守る\n\n神Excelにしない\n\n\n一行目には必ず変数名を記載する\n\n変数名に（_,-を除く）記号・空白を使わない\n変数名の最初の文字を数字・記号（_,-）にしない\n\n\n各列の行数を合わせる\n\n各列の行数が一致していない場合は自動的に先頭からのデータを用いて行数が一致するように処理してしまう場合があります\n欠損値（欠測値）の扱いに関しては、明示的にNAのように文字を入力するか空白（何も入力しない）にするかルールをあらかじめ決めておく"
  },
  {
    "objectID": "dataset.html#データセットを読み込む",
    "href": "dataset.html#データセットを読み込む",
    "title": "\n2  データセット\n",
    "section": "\n2.4 データセットを読み込む",
    "text": "2.4 データセットを読み込む\n　R Commanderでデータセットのファイルを読み込むには［データ］メニューを使います。\n\n2.4.1 CSV(UTF-8)形式の場合\n　［データ］-［データのインポート］-［テキストファイルまたはクリップボード,URL から…］を実行すると下図のようなダイアログが開きます。\n\n\n条件設定ダイアログ\n\n\n\n\n\n\n\n設定項目\n設定内容\n\n\n\nデータセット名を入力\nデータセットの変数名を指定\n\n\nファイル内に変数名あり\n一行目が変数名か否か\n\n\n文字変数を因子に変換\n文字型変数を因子型変数に変換するか否か\n\n\n欠測値の記号\n欠損値（欠測値）を意味する文字を指定\n\n\nデータファイルの場所\n読み込ませたいデータの位置を指定\n\n\nフィールドの区切り記号\nCSVの場合は「カンマ」、TSVの場合は「タブ」\n\n\n小数点の記号\n通常は「ピリオド」\n\n\n\n　データファイルの場所をローカルファイルシステムまたはインターネットのURLにして ［OK］ボタンをクリックします。ローカルファイルの場合はファイルダイアログが、インターネットURLの場合は入力ダイアログが開きますのでダイアログに合わせた操作を行ってください。\n\n2.4.2 xls形式／xlsx形式の場合\n　［データ］-［データのインポート］-［エクセルファイルから…］を実行すると下図のようなダイアログが開きます。\n\n\n条件設定ダイアログ\n\n\n\n\n\n\n\n設定項目\n設定内容\n\n\n\nデータセット名を入力\nデータセットの変数名を指定\n\n\nスプレッドシートの1行目の変数名\n一行目が変数名か否か\n\n\nスプレッドシートの1列目の行名\n一列目が行名か否か\n\n\n文字列を因子に変換\n文字型変数を因子型変数に変換するか否か\n\n\n欠測値の記号\n欠損値（欠測値）を意味する文字を指定\n\n\n\n　各設定項目を設定後、［OK］ボタンをクリックするとファイルダイアログが開きますので読み込みたいファイルを指定してください。なお、ファイル内に複数のシートがある場合は最初のシートだけを読み込みます5。5 GUI操作では任意のシートを読み込むことはできません\n\n2.4.3 .RData形式の場合\n　［データ］-［データセットのロード…］を実行するとファイル選択ダイアログが開きますので読み込みたい.RData形式のファイルを指定します。読み込むと自動的にアクティブデータセットに読み込んだデータセット名が表示されます。\n　サンプルで提供されているファイルに格納されているデータセット名は下表の通りです。なお、データセット名が同一のファイルを読み込んだ場合、確認なしで上書きされます。\n\n\n\n\n\n\n\nファイル名\nデータセット名\nデータ数\n\n\n\nバイタル.RData\nVitalSign\n57 obs. of 13 variables\n\n\n外来患者ストレス.RData\nPatientStress\n337 obs. of 14 variables\n\n\n外来患者ストレス(元データ).RData\nPatientStress\n337 obs. of 9 variables"
  },
  {
    "objectID": "dataset.html#アクティブデータセット",
    "href": "dataset.html#アクティブデータセット",
    "title": "\n2  データセット\n",
    "section": "\n2.5 アクティブデータセット",
    "text": "2.5 アクティブデータセット\n　R Commanderにはアクティブデータセットという概念があります。アクティブデータセットとは計算対象となるデータセットのことで、設定されていないと統計量の算出やグラフによる可視化ができません。\n\n\n\n\n\n\nFYI: アクティブデータセット\n\n\n\nR CommanderはRの機能（関数）を利用していますので、Rでも同様の機能を利用することは可能ですが、アクティブなデータセットを常に意識する必要があり参照間違いや変数名のコンフリクトを起こしやすいためRで利用することはおすゝめできません。"
  },
  {
    "objectID": "try.html#rコマンダーの起動",
    "href": "try.html#rコマンダーの起動",
    "title": "3  使ってみる",
    "section": "3.1 Rコマンダーの起動",
    "text": "3.1 Rコマンダーの起動\n　R Commanderを起動するには必ず最初にRを起動します。\n\nRを起動する\nRのメニューから［パッケージ］-［パッケージの読み込み…］を実行し\n表示されたダイアログから「Rcmdr」を選択し[OK]ボタンをクリックする\n\n\n\n\nR Commander\n\n\n\n\n\n\n\n\nFYI: Rのウィンドウの扱い\n\n\n\nR Commanderが起動してもRのウィンドウは閉じない（終了させない）でください。バックグラウンドで実行処理を担っています。邪魔な場合は最小化させてください。\n\n\n\n3.1.1 メニュー\n　R Commanderは基本的にメニュー操作だけで利用できます。各メニューの内容は下表の通りです。\n\n\n\n\n\n\n\nメニュー\n内容\n\n\n\n\nファイル\n各種ファイル操作\n\n\n編集\nスクリプトウィンドウに対する編集操作\n\n\nデータ\nデータセットのハンドリング\n\n\n統計量 1\nアクティブデータセットに対する統計量算出、検定、モデリング\n\n\nグラフ 2\nアクティブデータセットに対するグラフ描画\n\n\nモデル 3\nアクティブモデルに対する診断（数値・グラフ）など\n\n\n分布 4\n様々な分布の統計量算出やグラフ描画\n\n\nツール\nR Commanderに関する各種設定\n\n\nヘルプ\n各種ヘルプ\n\n\n\n1 アクティブデータセットが設定されていないと使えません2 アクティブデータセットが設定されていないと使えません3 ［統計量］メニューでのモデリング結果をアクティブモデルに設定しておく必要があります4 アクティブデータセットとは無関係に使えます\n\n3.1.2 データセット・モデル\n　分析対象となるデータセットやモデルの状態を表示・設定することができます。アクティブデータセットやアクティブモデルの切り替えはここから行います。参考までにアクティブデータセットが設定されている状態はExcelで計算対象とするシートを表示している状態のようなものです。\n\n\n3.1.3 Rスクリプト／Rマークダウン\n　使用しなくても一通りの処理はできます。最初は気にしないほうがよいです。なお、R Commanderが使用している関数の大半はR Commanderが独自に作成している（ラッパー）関数であり汎用性が低いのでこれらの関数の使い方を覚える必要は基本的にありません。\n\n\n3.1.4 実行ボタン\n　スクリプトを実行する際に利用しますが、最初は気にしないほうがよいです。\n\n\n3.1.5 出力\n　Rのコンソールと呼ばれる部分で実行内容と実行結果が表示されます。利用するメニューにより表示内容が異なりますので、順次、覚えていきましょう。\n\n\n3.1.6 メッセージ\n　Rのシステムメッセージやエラーメッセージが表示されます。意図しない動作の場合は、ここのメッセージを確認してみてください。"
  },
  {
    "objectID": "try.html#コマンドによる操作",
    "href": "try.html#コマンドによる操作",
    "title": "3  使ってみる",
    "section": "3.2 コマンドによる操作",
    "text": "3.2 コマンドによる操作\n　最初は混乱の元になるだけですので、覚えなくて構いません。R Commanderを使いこなして限界を感じるようになったら覚えましょう。"
  },
  {
    "objectID": "try.html#付属データの利用",
    "href": "try.html#付属データの利用",
    "title": "3  使ってみる",
    "section": "3.3 付属データの利用",
    "text": "3.3 付属データの利用\n　パッケージに付属のデータはサンプルとして利用されることが多いですから、読み込み方法を覚えてアクティブデータセットに設定できるようになりましょう。なお、テキストのサンプルデータをはじめとした主なファイル形式の読み込み方はこちらで説明してあります。"
  },
  {
    "objectID": "try.html#グラフの保存",
    "href": "try.html#グラフの保存",
    "title": "3  使ってみる",
    "section": "3.4 グラフの保存",
    "text": "3.4 グラフの保存\n　テキストでは七種類のファイル形式で保存できると説明されていますが、バージョンやOS環境により異なります。汎用性を考えるとビットマップ系の場合はJPGE形式かPNG形式、ベクトル形式の場合はPostscript形式かEPS形式が無難です。"
  },
  {
    "objectID": "try.html#グラフの貼り付け",
    "href": "try.html#グラフの貼り付け",
    "title": "3  使ってみる",
    "section": "3.5 グラフの貼り付け",
    "text": "3.5 グラフの貼り付け\n　テキストではクリップボード経由の貼り付け方法を説明していますが、前節で説明のあったファイル経由の貼り付けでも構いません。\n\n\n\n\n\n\nFYI: 再現可能性を考える\n\n\n\nクリップボードを経由する方法は簡単な反面、どの条件で描いたグラフかを後で特定することが難しくなります。なお、データ分析の世界では分析条件が特定できて同じ結果を得られることを再現可能性（分析再現性）という言葉を使って表すことがあります。"
  },
  {
    "objectID": "try.html#終了方法",
    "href": "try.html#終了方法",
    "title": "3  使ってみる",
    "section": "3.6 終了方法",
    "text": "3.6 終了方法\n　［ファイル］-［終了］からは\n\nR Commanderのみを終了\nR CommanderとRを終了\nR Commanderを再起動\n\nの三つが選択でき、通常は「R CommanderとRを終了」を選べばよいでしょう。\n　なお、終了させる際に各種ファイルを保存するか否かを確認するダイアログが表示されますが、最初のうちは保存しない方がよいでしょう。"
  }
]
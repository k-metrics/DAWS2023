[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "『統計ソフト「R」超入門』",
    "section": "",
    "text": "1 環境構築\n本資料では2023年度データ分析勉強会の図書である『統計ソフト「R」超入門』逸見功著（以降、テキスト）で利用するR/R Commander環境を構築する方法を紹介しています。Windows環境のみが対象です。他のOSを利用したい場合はCRANにてインストール方法を確認してください。なお、本資料はR/R Commanderが動作することを保証するものではありません。\n環境構築前に下記の条件を満たしていることを確認してください。\n環境構築の手順は下記の通りです。",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>環境構築</span>"
    ]
  },
  {
    "objectID": "index.html#rのインストール",
    "href": "index.html#rのインストール",
    "title": "『統計ソフト「R」超入門』",
    "section": "1.1 Rのインストール",
    "text": "1.1 Rのインストール\n　テキストのP24から図解されていますので、図解が必要な場合はテキストを参照してください。\n\n1.1.1 ダウンロード\n　Rのインストーラーをダウンロードします。\n\nCRANからRの最新版インストーラをダウンロードします\nダウンロードしたファイルのウィルスチェックをします\n\n\n\n\n\n\n\nVersion\n\n\n\n\n\n書籍と同じバージョンを利用したい場合にはこちらからR4.2.2をダウンロードしてください。\n\n\n\n\n\n1.1.2 インストール\n　Rのインストールではダイアログでの問い合わせに対して基本的にデフォルトを選択します。ただし、R Commnderを使いやすくするために起動時オプションの選択だけはデフォルトから変更します。\n\nダウンロードしたファイル（インストーラ）を実行\n\n以降、ウィザード形式の指示に従う\n\nインストール言語を選択\nライセンスを確認\nインストール先を指定\nコンポーネントを選択\n起動時オプションを選択\n\n「はい(カスタマイズする)」を選択\n\n\n\n表示モード\n\n「SDI(複数のウィンドウを使用して表示)」3を選択\n\n\nヘルプの表示方法\n\n「HTMLヘルプ」4を選択\n\n\n\nスタートメニューフォルダーの指定\n追加タスクの選択\n\n「アイコンの追加」はお好みで選択\n\nインストール状況（プログレス表示）\n完了\n\n3 カスタマイズせずにデフォルトインストールした場合は下記のリカバリーを参考にSDIモードに変更してください4 ヘルプの表示方法は好みで構いませんがHTML形式の方が関連項目のリンクが使えるので便利です\n\n\n\n\n\nMDI or SDI\n\n\n\n\n\nR Commanderを利用する場合は、操作ウィンドウやグラフ表示に個々のウィンドウを割り当てるSDIモードが便利です。インストール時にMDIを選択してた場合でもR起動後にオプションで変更できます。\n\n\n\n\n\n1.1.3 起動確認\n　スタートメニューから［R］-［R 4.x.x］を実行し下図5のようなウィンドウが表示されることを確認します。\n5 図はR4.3.0でバージョンにより表記が変わります。\n\n\nR Console\n\n\n　RのウィンドウはそのままでR Commanderのインストールに進みます。\n\n\n1.1.4 リカバリー（SDIモードへの変更）\n　MDIモードでインストールした場合は下記の手順でSDIモードに変更してください。\n\nRのメニューから［編集］-［GUIプリファレンス…］を実行して設定エディタダイアログを開く\n\n\n最上段にある［Sigle or multiple］で「SDI」にチェックを入れ［OK］ボタンをクリックする\n\nRを再起動する",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>環境構築</span>"
    ]
  },
  {
    "objectID": "index.html#r-commanderのインストール",
    "href": "index.html#r-commanderのインストール",
    "title": "『統計ソフト「R」超入門』",
    "section": "1.2 R Commanderのインストール",
    "text": "1.2 R Commanderのインストール\n　テキストのP28から図解されていますので、図解が必要な場合はテキストを参照してください。\n\n1.2.1 インストール\n　R Commanderは単独のプログラムではなくRのパッケージ（ライブラリ）として動く機能拡張プログラムですので、インストールはRから行います。\n\n\n\n\n\n\nソースからインストール？\n\n\n\n\n\nパッケージのインストール中に「パッケージのソースからインストールを行いますか？」のようなメッセージが表示された場合は「いいえ(No)」を選択してください。今回構築するWindows環境ではソースからのインストールに対応していません。なお、このメッセージはCRANのパッケージ更新状況によるので表示されない場合もあります。\n\n\n\n\nRのメニューから［パッケージ］-［パッケージのインストール…］を実行\nパッケージをダウンロードするミラーサイトを選択して［OK］をクリック\n\nデフォルトの「0-Cloud[https]」を選択\n\nパッケージ一覧から「Rcmdr」を選択して［OK］をクリック\nパーソナルライブラリの利用確認\n\n「Would you like to use a psersonal library instead」のダイアログが初回インストール時のみ表示されるので［はい(Y)］をクリック\n\nインストール先の確認\n\n初回のみで［はい(Y)］をクリック\n\nパッケージダウンロードのプログレスが複数表示\n\nなにもしない\n\nR Commanderインストール完了\n\n\n\n\nR Console\n\n\n\n\n1.2.2 起動確認\n　R Commanderが起動することを確認します。\n\nRのメニューから［パッケージ］-［パッケージの読み込み…］を実行\n「Rcmdr」を選択\n不足パッケージのインストール\n\n「Rcmdrが利用する次のパッケージがありません」と初回起動時のみ表示されるので「はい(Y)」を選んでインストールする\n\nダウンロード先の選択\n\nデフォルトの「CRAN」を選択\n\nR Commander起動\n\nRに「以下のオブジェクトは ‘package:xxx’ からマスクされています」のメッセージが出ますが無視して構いません（問題ありません）\n\n\n\n\n\nR Commander",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>環境構築</span>"
    ]
  },
  {
    "objectID": "index.html#動作確認",
    "href": "index.html#動作確認",
    "title": "『統計ソフト「R」超入門』",
    "section": "1.3 動作確認",
    "text": "1.3 動作確認\n　以下はR Commanderウィンドウでの操作になります。\n\nメニューバーの下にある［データセット:］の部分が「&lt;アクティブデータセットなし&gt;」になっていることを確認\nメニューから［データ］-［パッケージ内のデータ］-［アタッチされたパッケージからデータセットを読み込む…］を実行\n［データセット名を入力:］欄に「iris」と入力し［OK］をクリック\nメニューバーの下にある［データセット:］の部分が「iris」になっていることを確認\nメニューから［グラフ］-［箱ひげ図…］を実行\n［変数］の「Petal.Length」をクリックし［OK］をクリック\n別ウィンドウで箱ひげ図が描かれることを確認\n\n\n\n\nR Commander",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>環境構築</span>"
    ]
  },
  {
    "objectID": "index.html#留意事項",
    "href": "index.html#留意事項",
    "title": "『統計ソフト「R」超入門』",
    "section": "1.4 留意事項",
    "text": "1.4 留意事項\n　Rを起動すると下記のメッセージが表示されるように利用やその結果に対しては誰も何も保証することはありません。\n\nR は、自由なソフトウェアであり、「完全に無保証」です。\n\n　したがって、利用に際しては結果などに疑問を感じた場合に自ら検証できる基本的な知識は必要です。",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>環境構築</span>"
    ]
  },
  {
    "objectID": "dataset.html",
    "href": "dataset.html",
    "title": "\n2  データセット\n",
    "section": "",
    "text": "2.1 データセットとは\nRにおけるデータセットとは分析対象となるデータの集まりを意味します。例えば、下表のような車の諸元をまとめたものはデータセットのひとつです。\n表計算ソフト(Excel)と比較すると下表のようなイメージになります。\n各シート単位で様々な計算やグラフ作成ができるのがR Commander(Rcmdr)だと思ってください。\nRではデータセットはdata.frame型という変数型を用いて一つの変数として扱います。data.frame型変数はTidy data（整然データ）3という概念を満たす変数型です。",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データセット</span>"
    ]
  },
  {
    "objectID": "dataset.html#データセットとは",
    "href": "dataset.html#データセットとは",
    "title": "\n2  データセット\n",
    "section": "",
    "text": "R\nExcel\n備考\n\n\n\n処理部\nR\nExcel\nインタプリタ1\n\n\n\nデータ\nデータセット\nシート\n数式・書式を含まないもの\n\n\nGUI\nR/Rcmdr2\n\nExcel\nWindows版Rは簡単なGUIあり\n\n\nスクリプト\nR Script\nVBA\n\n\n\n機能拡張\nパッケージ\nアドオン\n\n\n\n\n1 動きを見ている限りExcelはセルでのイベント駆動によるインタプリタ処理だと思われます2 R Commanderの実装としてはパッケージ\n\n3 Wikipedia\n\n\n\n\n\nTidy data（整然データ）\n\n\n\n\n\n以下の条件を満たす表型のデータをTidy dataといい、構造と意味が合致しているのが特徴です。\n　1. 個々の変数が一つの列をなす\n　2. 個々の観測が一つの行をなす\n　3. 個々の値が一つのセルをなす\n　4. 個々の観測の構成単位の累計が一つの表をなす\nなので、神ExcelはTidy dataにはなりませんのでRでそのまま扱うことはできません。\n\n\n\n\n2.1.1 data.frame型\n　data.frame型変数は下記のような構造を取ります。特徴的なのは一つの変数（データセット）で複数の変数を扱うことができる点です。前出の車両諸元に関するデータセットでは11個の実数型変数（num）からなる32組の観測（車種）を持っています。\n\n\n'data.frame':   32 obs. of  11 variables:\n $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...\n $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...\n $ disp: num  160 160 108 258 360 ...\n $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...\n $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...\n $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...\n $ qsec: num  16.5 17 18.6 19.4 17 ...\n $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...\n $ am  : num  1 1 1 0 0 0 0 0 0 0 ...\n $ gear: num  4 4 4 3 3 3 3 4 4 4 ...\n $ carb: num  4 4 1 1 2 1 4 2 2 4 ...\n\n\n　data.frame型変数では実数型以外にも整数型・文字型・論理型・日付型・因子型などの様々な変数を混在させることが可能です。",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データセット</span>"
    ]
  },
  {
    "objectID": "dataset.html#組み込みデータセット",
    "href": "dataset.html#組み込みデータセット",
    "title": "\n2  データセット\n",
    "section": "\n2.2 組み込みデータセット",
    "text": "2.2 組み込みデータセット\n　組み込みデータセットはテキストP36のパッケージ付属データと同義です。標準で用意されているdatasetsパッケージは名前の通り様々なデータセットが組み込まれているパッケージです。代表的なデータセットを簡単に紹介しておきます。\n\n2.2.1 Iris flower data set\n　統計学の世界で最も有名な「フィッシャーのアヤメ」のデータセットです。三品種のアヤメの花の大きさを計測したデータで、萼片（Sepal）と花弁（Petal）の計測値が品種ごとに各50組、計150組が格納されています。品種（Species）は因子型と呼ばれる変数型になっており、層別処理を行う際に便利なようになっています。\n\nCodedatasets::iris\n\n\n\n\n\n  \n\n\n\n\n\n'data.frame':   150 obs. of  5 variables:\n $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...\n $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...\n $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...\n $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...\n $ Species     : Factor w/ 3 levels \"setosa\",\"versicolor\",..: 1 1 1 1 1 1 1 1 1 1 ...\n\n\n\n2.2.2 New York Air Quarity Measurements\n　テキストにも出てくる1973年5月から9月にかけてニューヨークで観測された大気データのデータセットで欠損値（欠測値）が含まれています。オゾン濃度、日射量、風速、気温の測定値と月、日のデータが格納されている一種の時系列のデータセットです。6変数のすべてが数値型ですが、整数型（int）と実数型（num）が混在しています。欠損値（欠測値）はNAと表示されます。\n\nCodedatasets::airquality\n\n\n\n\n\n  \n\n\n\n\n\n'data.frame':   153 obs. of  6 variables:\n $ Ozone  : int  41 36 12 18 NA 28 23 19 8 NA ...\n $ Solar.R: int  190 118 149 313 NA NA 299 99 19 194 ...\n $ Wind   : num  7.4 8 12.6 11.5 14.3 14.9 8.6 13.8 20.1 8.6 ...\n $ Temp   : int  67 72 74 62 56 66 65 59 61 69 ...\n $ Month  : int  5 5 5 5 5 5 5 5 5 5 ...\n $ Day    : int  1 2 3 4 5 6 7 8 9 10 ...",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データセット</span>"
    ]
  },
  {
    "objectID": "dataset.html#データセットを作成する",
    "href": "dataset.html#データセットを作成する",
    "title": "\n2  データセット\n",
    "section": "\n2.3 データセットを作成する",
    "text": "2.3 データセットを作成する\n　R Commanderにはデータセットを作成するための機能が組み込まれていますが、使いやすいとは言えないので、Excelのような表計算ソフトを使ってデータファイルを作成することをおすゝめします。R Commanderが対応している代表的なファイル形式はxls形式、xlsx形式、CSV形式です。変数名などに日本語が含まれるデータをCSV形式にする場合には必ずUTF-8エンコーディングを指定して保存してくださいください。\n　R CommanderのGUIによる読み込み処理ではエンコーディングが指定できないために日本語版Excelがデフォルトで書き出すシフトJISエンコーディングされたファイルには対応していません4。\n4 R 4.2からデフォルトロケール（エンコーディング）をシフトJISからUTF-8に変更したために起こる日本語版Windows特有の問題です\n2.3.1 R Commanderのためのデータセット\n　R CommanderではGUI操作の弊害で様々なオプションの指定ができないためエンコーディング以外に下記の条件を満たすファイルを作成することで読み込み時のエラーを回避するようにしてください。\n\nTidy data形式を守る\n\n神Excelにしない\n\n\n一行目には必ず変数名を記載する\n\n変数名に（_,-を除く）記号・空白を使わない\n変数名の最初の文字を数字・記号（_,-）にしない\n\n\n各列の行数を合わせる\n\n各列の行数が一致していない場合は自動的に先頭からのデータを用いて行数が一致するように処理してしまう場合があります\n欠損値（欠測値）の扱いに関しては、明示的にNAのように文字を入力するか空白（何も入力しない）にするかルールをあらかじめ決めておく",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データセット</span>"
    ]
  },
  {
    "objectID": "dataset.html#データセットを読み込む",
    "href": "dataset.html#データセットを読み込む",
    "title": "\n2  データセット\n",
    "section": "\n2.4 データセットを読み込む",
    "text": "2.4 データセットを読み込む\n　R Commanderでデータセットのファイルを読み込むには［データ］メニューを使います。\n\n2.4.1 CSV(UTF-8)形式の場合\n　［データ］-［データのインポート］-［テキストファイルまたはクリップボード,URL から…］を実行すると下図のようなダイアログが開きます。\n\n\n条件設定ダイアログ\n\n\n\n\n\n\n\n設定項目\n設定内容\n\n\n\nデータセット名を入力\nデータセットの変数名を指定\n\n\nファイル内に変数名あり\n一行目が変数名か否か\n\n\n文字変数を因子に変換\n文字型変数を因子型変数に変換するか否か\n\n\n欠測値の記号\n欠損値（欠測値）を意味する文字を指定\n\n\nデータファイルの場所\n読み込ませたいデータの位置を指定\n\n\nフィールドの区切り記号\nCSVの場合は「カンマ」、TSVの場合は「タブ」\n\n\n小数点の記号\n通常は「ピリオド」\n\n\n\n　データファイルの場所をローカルファイルシステムまたはインターネットのURLにして ［OK］ボタンをクリックします。ローカルファイルの場合はファイルダイアログが、インターネットURLの場合は入力ダイアログが開きますのでダイアログに合わせた操作を行ってください。\n\n2.4.2 xls形式／xlsx形式の場合\n　［データ］-［データのインポート］-［エクセルファイルから…］を実行すると下図のようなダイアログが開きます。\n\n\n条件設定ダイアログ\n\n\n\n\n\n\n\n設定項目\n設定内容\n\n\n\nデータセット名を入力\nデータセットの変数名を指定\n\n\nスプレッドシートの1行目の変数名\n一行目が変数名か否か\n\n\nスプレッドシートの1列目の行名\n一列目が行名か否か\n\n\n文字列を因子に変換\n文字型変数を因子型変数に変換するか否か\n\n\n欠測値の記号\n欠損値（欠測値）を意味する文字を指定\n\n\n\n　各設定項目を設定後、［OK］ボタンをクリックするとファイルダイアログが開きますので読み込みたいファイルを指定してください。なお、ファイル内に複数のシートがある場合は最初のシートだけを読み込みます5。\n5 GUI操作では任意のシートを読み込むことはできません\n2.4.3 .RData形式の場合\n　［データ］-［データセットのロード…］を実行するとファイル選択ダイアログが開きますので読み込みたい.RData形式のファイルを指定します。読み込むと自動的にアクティブデータセットに読み込んだデータセット名が表示されます。\n　サンプルで提供されているファイルに格納されているデータセット名は下表の通りです。なお、データセット名が同一のファイルを読み込んだ場合、確認なしで上書きされます。\n\n\n\n\n\n\n\nファイル名\nデータセット名\nデータ数\n\n\n\nバイタル.RData\nVitalSign\n57 obs. of 13 variables\n\n\n外来患者ストレス.RData\nPatientStress\n337 obs. of 14 variables\n\n\n外来患者ストレス(元データ).RData\nPatientStress\n337 obs. of 9 variables",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データセット</span>"
    ]
  },
  {
    "objectID": "dataset.html#アクティブデータセット",
    "href": "dataset.html#アクティブデータセット",
    "title": "\n2  データセット\n",
    "section": "\n2.5 アクティブデータセット",
    "text": "2.5 アクティブデータセット\n　R Commanderにはアクティブデータセットという概念があります。アクティブデータセットとは計算対象となるデータセットのことで、設定されていないと統計量の算出やグラフによる可視化ができません。\n\n\n\n\n\n\nアクティブデータセット\n\n\n\n\n\nR CommanderはRの機能（関数）を利用していますので、Rでも同様の機能を利用することは可能ですが、アクティブなデータセットを常に意識する必要があり参照間違いや変数名のコンフリクトを起こしやすいためRで利用することはおすゝめできません。",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データセット</span>"
    ]
  },
  {
    "objectID": "try.html",
    "href": "try.html",
    "title": "3  使ってみる",
    "section": "",
    "text": "3.1 Rコマンダーの起動\nR Commanderを起動するには必ず最初にRを起動します。",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>使ってみる</span>"
    ]
  },
  {
    "objectID": "try.html#rコマンダーの起動",
    "href": "try.html#rコマンダーの起動",
    "title": "3  使ってみる",
    "section": "",
    "text": "Rを起動する\nRのメニューから［パッケージ］-［パッケージの読み込み…］を実行し\n表示されたダイアログから「Rcmdr」を選択し[OK]ボタンをクリックする\n\n\n\n\nR Commander\n\n\n\n\n\n\n\n\nRのウィンドウの扱い\n\n\n\n\n\nR Commanderが起動してもRのウィンドウは閉じない（終了させない）でください。バックグラウンドで実行処理を担っています。邪魔な場合は最小化させてください。\n\n\n\n\n3.1.1 メニュー\n　R Commanderは基本的にメニュー操作だけで利用できます。各メニューの内容は下表の通りです。\n\n\n\n\n\n\n\nメニュー\n内容\n\n\n\n\nファイル\n各種ファイル操作\n\n\n編集\nスクリプトウィンドウに対する編集操作\n\n\nデータ\nデータセットのハンドリング\n\n\n統計量 1\nアクティブデータセットに対する統計量算出、検定、モデリング\n\n\nグラフ 2\nアクティブデータセットに対するグラフ描画\n\n\nモデル 3\nアクティブモデルに対する診断（数値・グラフ）など\n\n\n分布 4\n様々な分布の統計量算出やグラフ描画\n\n\nツール\nR Commanderに関する各種設定\n\n\nヘルプ\n各種ヘルプ\n\n\n\n1 アクティブデータセットが設定されていないと使えません2 アクティブデータセットが設定されていないと使えません3 ［統計量］メニューでのモデリング結果をアクティブモデルに設定しておく必要があります4 アクティブデータセットとは無関係に使えます\n\n3.1.2 データセット・モデル\n　分析対象となるデータセットやモデルの状態を表示・設定することができます。アクティブデータセットやアクティブモデルの切り替えはここから行います。参考までにアクティブデータセットが設定されている状態はExcelで計算対象とするシートを表示している状態のようなものです。\n\n\n3.1.3 Rスクリプト／Rマークダウン\n　使用しなくても一通りの処理はできます。最初は気にしないほうがよいです。なお、R Commanderが使用している関数の大半はR Commanderが独自に作成している（ラッパー）関数であり汎用性が低いのでこれらの関数の使い方を覚える必要は基本的にありません。\n\n\n3.1.4 実行ボタン\n　スクリプトを実行する際に利用しますが、最初は気にしないほうがよいです。\n\n\n3.1.5 出力\n　Rのコンソールと呼ばれる部分で実行内容と実行結果が表示されます。利用するメニューにより表示内容が異なりますので、順次、覚えていきましょう。\n\n\n3.1.6 メッセージ\n　Rのシステムメッセージやエラーメッセージが表示されます。意図しない動作の場合は、ここのメッセージを確認してみてください。",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>使ってみる</span>"
    ]
  },
  {
    "objectID": "try.html#コマンドによる操作",
    "href": "try.html#コマンドによる操作",
    "title": "3  使ってみる",
    "section": "3.2 コマンドによる操作",
    "text": "3.2 コマンドによる操作\n　最初は混乱の元になるだけですので、覚えなくて構いません。R Commanderを使いこなして限界を感じるようになったら覚えましょう。",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>使ってみる</span>"
    ]
  },
  {
    "objectID": "try.html#付属データの利用",
    "href": "try.html#付属データの利用",
    "title": "3  使ってみる",
    "section": "3.3 付属データの利用",
    "text": "3.3 付属データの利用\n　パッケージに付属のデータはサンプルとして利用されることが多いですから、読み込み方法を覚えてアクティブデータセットに設定できるようになりましょう。なお、テキストのサンプルデータをはじめとした主なファイル形式の読み込み方はこちらで説明してあります。",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>使ってみる</span>"
    ]
  },
  {
    "objectID": "try.html#グラフの保存",
    "href": "try.html#グラフの保存",
    "title": "3  使ってみる",
    "section": "3.4 グラフの保存",
    "text": "3.4 グラフの保存\n　テキストでは七種類のファイル形式で保存できると説明されていますが、バージョンやOS環境により異なります。汎用性を考えるとビットマップ系の場合はJPGE形式かPNG形式、ベクトル形式の場合はPostscript形式かEPS形式が無難です。",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>使ってみる</span>"
    ]
  },
  {
    "objectID": "try.html#グラフの貼り付け",
    "href": "try.html#グラフの貼り付け",
    "title": "3  使ってみる",
    "section": "3.5 グラフの貼り付け",
    "text": "3.5 グラフの貼り付け\n　テキストではクリップボード経由の貼り付け方法を説明していますが、前節で説明のあったファイル経由の貼り付けでも構いません。\n\n\n\n\n\n\n再現可能性を考える\n\n\n\n\n\nクリップボードを経由する方法は簡単な反面、どの条件で描いたグラフかを後で特定することが難しくなります。なお、データ分析の世界では分析条件が特定できて同じ結果を得られることを再現可能性（分析再現性）という言葉を使って表すことがあります。",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>使ってみる</span>"
    ]
  },
  {
    "objectID": "try.html#終了方法",
    "href": "try.html#終了方法",
    "title": "3  使ってみる",
    "section": "3.6 終了方法",
    "text": "3.6 終了方法\n　［ファイル］-［終了］からは\n\nR Commanderのみを終了\nR CommanderとRを終了\nR Commanderを再起動\n\nの三つが選択でき、通常は「R CommanderとRを終了」を選べばよいでしょう。\n　なお、終了させる際に各種ファイルを保存するか否かを確認するダイアログが表示されますが、最初のうちは保存しない方がよいでしょう。",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>使ってみる</span>"
    ]
  },
  {
    "objectID": "warmingup.html",
    "href": "warmingup.html",
    "title": "\n4  始める前に\n",
    "section": "",
    "text": "4.1 使用するデータの内容\nテキストでは使用するデータのファイル名が「外来患者ストレス.RData」となっていますが、ファイル名が異なるのに同じデータセット名であったり、テキストの説明と異なる順番で変数が並んでいたり、Rcmdrのバグに引っかかったりするので、区別がつくようにいくつかのファイルを用意しました。\n各変数の詳細についてはテキストで確認してください。\nなお、作成したデータでは使い方がよくわからない変数「ID」を除いてあります。",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>始める前に</span>"
    ]
  },
  {
    "objectID": "warmingup.html#使用するデータの内容",
    "href": "warmingup.html#使用するデータの内容",
    "title": "\n4  始める前に\n",
    "section": "",
    "text": "Rcmdrのバグ\n\n\n\n\n\nRcmdr 2.8.0にはアクティブデータセット内に10を超える変数がある場合、要約統計量が計算できずフリーズするというバグがあります。",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>始める前に</span>"
    ]
  },
  {
    "objectID": "warmingup.html#変数の種類",
    "href": "warmingup.html#変数の種類",
    "title": "\n4  始める前に\n",
    "section": "\n4.2 変数の種類",
    "text": "4.2 変数の種類\n　テキストでは変数を「数値をとる場合」と「非数値をとる場合」に二分していますが、一般的には「量的変数」と「質的変数」という名称が使われますが、このふたつの変数を更に分類した尺度を用いるのが一般的です。\n\n\n\n\n\n\n\n変数区分\n尺度\n意味\n\n\n\n質的変数\n名義尺度\n値が同じか否かという意味しかない\n\n\n質的変数\n順序尺度\n順序や大小には意味があるが間隔には意味がない\n\n\n量的変数\n間隔尺度\n0が相対的な意味を持ち等間隔であり間隔に意味がある\n\n\n量的変数\n比例尺度\n0が絶対的な意味を持ち間隔と比率に意味があるもの",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>始める前に</span>"
    ]
  },
  {
    "objectID": "warmingup.html#データ解析の流れ",
    "href": "warmingup.html#データ解析の流れ",
    "title": "\n4  始める前に\n",
    "section": "\n4.3 データ解析の流れ",
    "text": "4.3 データ解析の流れ\n\n一変数単位での要約統計量と分布の確認（第5章）\n二変数単位での相関の確認（第6章）\n二変数以上の変数間の関係を表すモデルの作成",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>始める前に</span>"
    ]
  },
  {
    "objectID": "browsingData.html",
    "href": "browsingData.html",
    "title": "\n5  データの特徴を探る\n",
    "section": "",
    "text": "5.1 量的変数のグラフ表現（P56-）",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>データの特徴を探る</span>"
    ]
  },
  {
    "objectID": "browsingData.html#量的変数のグラフ表現p56-",
    "href": "browsingData.html#量的変数のグラフ表現p56-",
    "title": "\n5  データの特徴を探る\n",
    "section": "",
    "text": "5.1.1 インデックスプロット（P56-P59）\n\n\nスパイク\n点\n\n\n\n\nグラフ - インデックスプロットRcmdrMisc::indexplot(PatientStressSub[,'ストレス反応得点', drop=FALSE],\n                     type='h', id.method='y', id.n=2,\n                     groups=PatientStressSub$性別)\n\n\n\n\n\n\n\n[1]  13 310\n\n\n\n\n\nグラフ - インデックスプロットRcmdrMisc::indexplot(PatientStressSub[,'ストレス反応得点', drop=FALSE],\n                     type='p', id.method='y', id.n=2,\n                     groups=PatientStressSub$性別)\n\n\n\n\n\n\n\n[1]  13 310\n\n\n\n\n\n\n5.1.2 ドットプロット（P60-P61）\n\nグラフ - ドットプロットwith(PatientStressSub, RcmdrMisc::Dotplot(健康統制感, by=性別, bin=FALSE))\n\n\n\n\n\n\n\n\n5.1.3 ドットチャート（P62-63）\n\n\n積み重ね＆少しずらす\n重ね合わせ（Overplot）\n\n\n\nグラフ - ドットチャート# 積み重ね\nstripchart(ストレス反応得点 ~ 年齢区分, vertical=TRUE, method=\"stack\",\n           ylab=\"ストレス反応得点\", data=PatientStressSub)\n\n# すこしずらす\nstripchart(ストレス反応得点 ~ 年齢区分, vertical=TRUE, method=\"jitter\",\n           ylab=\"ストレス反応得点\", data=PatientStressSub)\n\n\n\n\n\n積み重ね\n\n\n\n\n\n少しずらす\n\n\n\n\n\n\n\nグラフ - ドットチャートstripchart(ストレス反応得点 ~ 年齢区分, vertical=TRUE,\n           ylab=\"ストレス反応得点\", data=PatientStressSub)\n\n\n\n\n\n\n\n\n\n\n\n5.1.4 離散数値変数のプロット（P64-P66）\n\nグラフ - 離散数値変数のプロットwith(PatientStressSub, RcmdrMisc::discretePlot(ストレッサー得点,\n                                               by=性別, scale=\"percent\"))\n\n\n\n\n\n\n\n\n5.1.5 ヒストグラム（P66-P70）\n\n\n頻度\nパーセント\n密度\n\n\n\n\nグラフ - ヒストグラムwith(PatientStressSub, RcmdrMisc::Hist(ストレス反応得点, scale=\"frequency\",\n                                       breaks=\"Sturges\", col=\"darkgray\"))\n\n\n\n\n\n\n\n\n\n\nグラフ - ヒストグラムwith(PatientStressSub, RcmdrMisc::Hist(ストレス反応得点, scale=\"percent\",\n                                       breaks=\"Sturges\", col=\"darkgray\"))\n\n\n\n\n\n\n\n\n\n\nグラフ - ヒストグラムwith(PatientStressSub, RcmdrMisc::Hist(ストレス反応得点, scale=\"density\",\n                                       breaks=\"Sturges\", col=\"darkgray\"))\n\n\n\n\n\n\n\n\n\n\n\n5.1.6 密度推定（P71-P74）\n\nグラフ - 密度推定car::densityPlot( ~ ストレス反応得点, data=PatientStressSub,\n                  bw=bw.SJ, adjust=1, kernel=dnorm, method=\"adaptive\")\n\n\n\n\n\n\n\n\n5.1.7 観葉表示（P74-78）\n\nグラフ - 観葉表示with(PatientStressSub, aplpack::stem.leaf(ストレス反応得点, na.rm=TRUE))\n\n1 | 2: represents 12\n leaf unit: 1\n            n: 337\n   42     0* | 000000000000000000001112222222333333334444\n   72     0. | 555666666667778888888999999999\n  108     1* | 000000000001111222333333333333344444\n  137     1. | 55555555566666777788889999999\n  164     2* | 000000000111111122222223334\n  (25)    2. | 5555556777778888888999999\n  148     3* | 001111111122223333344\n  127     3. | 556666667778889\n  112     4* | 01111233334444\n   98     4. | 556678899999\n   86     5* | 001112223333444\n   71     5. | 568888899\n   62     6* | 011233\n   56     6. | 55679999\n   48     7* | 01244\n   43     7. | 57788999\n   35     8* | 111112\n   29     8. | 56677\n          9* | \n   24     9. | 555789\n   18    10* | 01\n   16    10. | 779\n   13    11* | 334\nHI: 124 126 126 131 139 140 141 142 148 156\n\n\n\n5.1.8 箱ひげ図（P78-P81）\n\nグラフ - 箱ひげ図car::Boxplot(ストレス反応得点 ~ 性別, data=PatientStressSub,\n             id=list(method=\"y\"))\n\n [1] \"28\"  \"76\"  \"113\" \"115\" \"195\" \"311\" \"13\"  \"92\"  \"200\" \"209\" \"270\" \"291\"\n[13] \"308\" \"310\" \"312\" \"318\"\n\n\n\n\n外れ値の特定：自動\n\n\n\n\n5.1.9 平均値プロット（P81-P87）\n\n\n年齢区分\n年齢区分/性別\n性別/年齢区分\n\n\n\n\nグラフ - 平均値のプロットwith(PatientStressSub, RcmdrMisc::plotMeans(健康統制感, 年齢区分,\n                                            error.bars=\"se\", connect=TRUE))\n\n\n\n\n\n\n\n\n\n\nグラフ - 平均値のプロットwith(PatientStressSub, RcmdrMisc::plotMeans(健康統制感, 年齢区分, 性別,\n                                            error.bars=\"se\", connect=TRUE,\n                                            legend.pos=\"top\"))\n\n\n\n\n\n\n\n\n\n\nグラフ - 平均値のプロットwith(PatientStressSub, RcmdrMisc::plotMeans(健康統制感, 性別, 年齢区分,\n                                            error.bars=\"se\", connect=TRUE,\n                                            legend.pos=\"farright\"))\n\n\n\n\n\n\n\n\n\n\n\n5.1.10 QQプロット（P87-P91）\n\n\nストレス反応得点\nストレス反応\n\n\n\n\nグラフ - QQプロットwith(PatientStressSub,\n     car::qqPlot(ストレス反応得点, dist=\"norm\",\n                 id=list(method=\"y\", n=0, labels=rownames(PatientStressSub))))\n\n\n\n\n\n\n\n\n\nストレス反応の4グラフ# ドットチャート\nwith(PatientStressSub, RcmdrMisc::Dotplot(ストレス反応, bin=FALSE))\n\n# ヒストグラム\nwith(PatientStressSub, RcmdrMisc::Hist(ストレス反応, scale=\"frequency\",\n                                       breaks=\"Sturges\", col=\"darkgray\"))\n\n# 密度推定\ncar::densityPlot( ~ ストレス反応, data=PatientStressSub, bw=bw.SJ, adjust=1,\n                  kernel=dnorm, method=\"adaptive\")\n\n# QQプロット\nwith(PatientStressSub,\n     car::qqPlot(ストレス反応, dist=\"norm\",\n                 id=list(method=\"y\", n=0, labels=rownames(PatientStressSub))))\n\n\n\n\n\nドットチャート\n\n\n\n\n\nヒストグラム\n\n\n\n\n\n\n\n密度推定\n\n\n\n\n\nQQプロット",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>データの特徴を探る</span>"
    ]
  },
  {
    "objectID": "browsingData.html#質的データのグラフ表現p91-",
    "href": "browsingData.html#質的データのグラフ表現p91-",
    "title": "\n5  データの特徴を探る\n",
    "section": "\n5.2 質的データのグラフ表現（P91-）",
    "text": "5.2 質的データのグラフ表現（P91-）\n\n5.2.1 棒グラフ（P92-P94）\nグラフ - 棒グラフwith(PatientStressSub,\n     RcmdrMisc::Barplot(性別, xlab=\"性別\", ylab=\"Frequency\", label.bars=TRUE))\n\nwith(PatientStressSub,\n     RcmdrMisc::Barplot(性別, by=年齢区分, style=\"divided\",\n                        legend.pos=\"topleft\", xlab=\"性別\", ylab=\"Frequency\",\n                        label.bars=TRUE))\n\nwith(PatientStressSub,\n     RcmdrMisc::Barplot(性別, by=年齢区分, style=\"parallel\",\n                        legend.pos=\"topleft\", xlab=\"性別\", ylab=\"Frequency\",\n                        label.bars=TRUE))\n\n\n\n\n\n層別なし\n\n\n\n\n\n年齢区分別（分割）\n\n\n\n\n\n年齢区分別（グループ化）\n\n\n\n\n\n5.2.2 円グラフ（P94-P97）\n\nグラフ - 棒グラフwith(PatientStressSub,\n     RcmdrMisc::piechart(年齢区分, xlab=\"\", ylab=\"\", main=\"年齢区分\",\n                         col=colorspace::rainbow_hcl(4), scale=\"percent\"))\n\n\n\n\n\n\n\n\n\n\n\n\n\n円グラフの始点を変更する\n\n\n\n\n\nRcmdrの円グラフはRcmdrMisc::pichart()関数を利用しており、その定義は下記の通りです。\n\nfunction piechart()piechart(x, scale = c(\"percent\", \"frequency\", \"none\"), \n         col = rainbow_hcl(nlevels(x)), ...)\n\n\n\nx: a factor or other discrete variable; the segments of the pie correspond to the unique values (levels) of x and are proportional to the frequency counts in the various levels.scale: parenthetical numbers to add to the pie-segment labels; the default is “percent”.col: colors for the segments; the default is provided by the rainbow_hcl function in the colorspace package....: further arguments to be passed to pie.\n\n円グラフの始点に関するパラメータはありませんが、...の部分でpie()関数へ渡すパラメータを指定できることがわかります。pie()関数の定義は\n\nfunction pie()pie(x, labels = names(x), edges = 200, radius = 0.8,\n    clockwise = FALSE, init.angle = if(clockwise) 90 else 0,\n    density = NULL, angle = 45, col = NULL, border = NULL,\n    lty = NULL, main = NULL, ...)\n\n\nとなっておりヘルプを見るとinit.angleパラメータを指定すれば始点を変更できることがわかります。\n\ninit.angle: number specifying the starting angle (in degrees) for the slices. Defaults to 0 (i.e., ‘3 o’clock’) unless clockwise is true where init.angle defaults to 90 (degrees), (i.e., ‘12 o’clock’).\n\ninit.angleの定義からclockwise = TRUEを指定することで始点を12時に変更できることがわかります。\n\nCodewith(PatientStressSub,\n     RcmdrMisc::piechart(年齢区分, xlab=\"\", ylab=\"\", main=\"年齢区分\",\n                         col=colorspace::rainbow_hcl(4), scale=\"percent\",\n                         clockwise=TRUE))\n\n\n\n\n\n\n\n\n\n\n\n5.2.3 複数のグラフを並べて描画\n　（省略）",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>データの特徴を探る</span>"
    ]
  },
  {
    "objectID": "browsingData.html#数値による要約p97-",
    "href": "browsingData.html#数値による要約p97-",
    "title": "\n5  データの特徴を探る\n",
    "section": "\n5.3 数値による要約（P97-）",
    "text": "5.3 数値による要約（P97-）\n\n5.3.1 すべての変数についての数値による要約（P97-99）\n\n統計量 - 要約 - アクティブデータセットsummary(PatientStressSub)\n\n 性別          年齢       ストレッサー得点 日常苛立ちごと     健康統制感    \n 男:119   Min.   :15.00   Min.   : 0.000   Min.   : 0.000   Min.   : 58.00  \n 女:218   1st Qu.:19.00   1st Qu.: 5.000   1st Qu.: 0.000   1st Qu.: 83.00  \n          Median :24.00   Median : 7.000   Median : 1.000   Median : 92.00  \n          Mean   :36.13   Mean   : 7.303   Mean   : 2.896   Mean   : 91.46  \n          3rd Qu.:52.00   3rd Qu.: 9.000   3rd Qu.: 4.000   3rd Qu.:101.00  \n          Max.   :87.00   Max.   :16.000   Max.   :25.000   Max.   :138.00  \n ストレス反応得点 ノンコンプライアンス行動数 年齢区分    ストレス反応   \n Min.   :  0.0    Min.   :0.0000             青年:171   Min.   : 0.000  \n 1st Qu.: 11.0    1st Qu.:0.0000             壮年: 43   1st Qu.: 3.317  \n Median : 25.0    Median :0.0000             中年: 79   Median : 5.000  \n Mean   : 34.9    Mean   :0.6083             高年: 44   Mean   : 5.219  \n 3rd Qu.: 50.0    3rd Qu.:1.0000                        3rd Qu.: 7.071  \n Max.   :156.0    Max.   :4.0000                        Max.   :12.490  \n\n\n\n\n\n\n\n\nRcmdrのバグ\n\n\n\n\n\nR Commanderにバグがあるため変数の数が10を超えるデータセットに対してこの操作を実行した場合、エラーが表示されてRcmdrがフリーズすることがあります。テキストP99の注釈参照方。\n\n\n\n\n5.3.2 量的データの数値による要約（P99-P103）\n\n\n数値による要約\n層別の統計量\n\n\n\n\n統計量 - 要約 - 数値による要約RcmdrMisc::numSummary(PatientStressSub[,c(\"ストレス反応得点\",\n                                          \"ストレッサー得点\"), drop=FALSE],\n                      groups=PatientStressSub$性別,\n                      statistics=c(\"mean\", \"sd\", \"quantiles\", \"CV\"),\n                      quantiles=c(0,.25,.5,.75,1))\n\nWarning in FUN(X[[i]], ...): not all values are positive\n\nWarning in FUN(X[[i]], ...): not all values are positive\n\nWarning in FUN(X[[i]], ...): not all values are positive\n\n\n\nVariable: ストレス反応得点 \n       mean       sd        CV 0% 25% 50%   75% 100%   n\n男 26.63866 26.30001 0.9872873  0   9  19 38.50  113 119\n女 39.40826 34.31023 0.8706356  0  14  31 54.75  156 218\n\nVariable: ストレッサー得点 \n       mean       sd        CV 0% 25% 50% 75% 100%   n\n男 7.386555 2.940394 0.3980739  1   5   7   9   15 119\n女 7.256881 3.113531 0.4290454  0   5   7   9   16 218\n\n\n\n\n\n統計量 - 要約 - 層別の統計量car::Tapply(ストレス反応得点 ~ 性別 + 年齢区分, mean, na.action=na.omit,\n            data=PatientStressSub)\n\n    年齢区分\n性別     青年     壮年     中年     高年\n  男 35.56000 26.15789 20.81250 12.72222\n  女 48.09091 44.70833 24.34043 21.34615\n\n\n\n\n\n\n5.3.3 質的データの度数分布および適合度検定（P104-P107）\n\n統計量 - 要約 - 頻度分布（カイ二乗検定あり）local({\n  .Table &lt;- with(PatientStressSub, table(性別))\n  cat(\"\\ncounts:\\n\")\n  print(.Table)\n  cat(\"\\npercentages:\\n\")\n  print(round(100*.Table/sum(.Table), 2))\n  .Probs &lt;- c(0.5,0.5) \n  chisq.test(.Table, p=.Probs)\n})\n\n\ncounts:\n性別\n 男  女 \n119 218 \n\npercentages:\n性別\n   男    女 \n35.31 64.69 \n\n\n\n    Chi-squared test for given probabilities\n\ndata:  .Table\nX-squared = 29.083, df = 1, p-value = 6.934e-08",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>データの特徴を探る</span>"
    ]
  },
  {
    "objectID": "browsingData.html#正規性の検定p107-p111",
    "href": "browsingData.html#正規性の検定p107-p111",
    "title": "\n5  データの特徴を探る\n",
    "section": "\n5.4 正規性の検定（P107-P111）",
    "text": "5.4 正規性の検定（P107-P111）\n　正規性の検定で用いられることが多いシャピロウィルク検定の帰無仮説は\n\n母集団は正規分布である\n\nであることに留意してください。\n\n\n正規性の検定\n層別した場合\n\n\n\nグラフ - QQプロット/統計量 - 要約 - 正規性の検定# QQプロット\nwith(PatientStressSub,\n     car::qqPlot(健康統制感, dist=\"norm\",\n                 id=list(method=\"y\", n=0, labels=rownames(PatientStressSub))))\n# 正規性の検定\nRcmdrMisc::normalityTest(~健康統制感, test=\"shapiro.test\",\n                         data=PatientStressSub)\n\n\n\n\n\n\n\n    Shapiro-Wilk normality test\n\ndata:  健康統制感\nW = 0.99445, p-value = 0.261\n\n\n\n\n\nグラフ - QQプロット/統計量 - 要約 - 正規性の検定#　QQプロット\nwith(PatientStressSub,\n     car::qqPlot(健康統制感, dist=\"norm\",\n                 id=list(method=\"y\", n=0, labels=rownames(PatientStressSub)),\n                 groups=性別))\n# 正規性の検定\nRcmdrMisc::normalityTest(健康統制感 ~ 性別, test=\"shapiro.test\",\n                         data=PatientStressSub)\n\n\n\n\n\n\n\n --------\n 性別 = 男 \n\n    Shapiro-Wilk normality test\n\ndata:  健康統制感\nW = 0.98277, p-value = 0.132\n\n --------\n 性別 = 女 \n\n    Shapiro-Wilk normality test\n\ndata:  健康統制感\nW = 0.99475, p-value = 0.6516\n\n --------\n\n p-values adjusted by the Holm method:\n   unadjusted adjusted\n男 0.13205    0.2641  \n女 0.65160    0.6516",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>データの特徴を探る</span>"
    ]
  },
  {
    "objectID": "wranglingData.html",
    "href": "wranglingData.html",
    "title": "\n6  変数間の関係を探る\n",
    "section": "",
    "text": "6.1 複数の量的変数間の関連性（P113-）",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>変数間の関係を探る</span>"
    ]
  },
  {
    "objectID": "wranglingData.html#複数の量的変数間の関連性p113-",
    "href": "wranglingData.html#複数の量的変数間の関連性p113-",
    "title": "\n6  変数間の関係を探る\n",
    "section": "",
    "text": "6.1.1 散布図（P113-P117）\n\n\n全体\n層別\n\n\n\n\nグラフ - 散布図car::scatterplot(ストレス反応~日常苛立ちごと, regLine=TRUE,\n                 smooth=list(span=0.5, spread=TRUE), boxplots=FALSE,\n                 jitter=list(x=1), \n                 data=PatientStress)\n\n\n\n\n\n\n\n\n\n\nグラフ - 散布図car::scatterplot(ストレス反応~日常苛立ちごと | 性別, regLine=TRUE,\n                 smooth=list(span=0.5, spread=TRUE), boxplots=FALSE,\n                 jitter=list(x=1), by.groups=TRUE,\n                 legend=list(coords=\"bottomright\"), data=PatientStress)\n\n\n\n\n\n\n\n\n\n\n\n6.1.2 相関の検定（P118-P123）\n\n統計量 - 要約 - 相関の検定with(PatientStress,\n     cor.test(ストレス反応, 日常苛立ちごと, alternative=\"two.sided\",\n              method=\"spearman\"))\n\n\n    Spearman's rank correlation rho\n\ndata:  ストレス反応 and 日常苛立ちごと\nS = 2809149, p-value &lt; 2.2e-16\nalternative hypothesis: true rho is not equal to 0\nsample estimates:\n      rho \n0.5596072 \n\n\n\n6.1.3 散布図行列（P123-P126）\n\nグラフ - 散布図行列car::scatterplotMatrix(~ストレス反応+ストレッサー得点+健康統制感,\n                       regLine=TRUE, smooth=list(span=0.5, spread=FALSE),\n                       diagonal=list(method=\"histogram\"), \n                       data=PatientStress)\n\n\n\n\n\n\n\n\n6.1.4 相関の検定\n\n統計量 - 要約 - 相関の検定RcmdrMisc::rcorr.adjust(\n  PatientStress[,c(\"ストレス反応\",\"ストレッサー得点\",\"健康統制感\")],\n  type=\"pearson\", use=\"complete\")\n\n\n Pearson correlations:\n                 ストレス反応 ストレッサー得点 健康統制感\nストレス反応           1.0000           0.2515      3e-04\nストレッサー得点       0.2515           1.0000      4e-03\n健康統制感             0.0003           0.0040      1e+00\n\n Number of observations: 337 \n\n Pairwise two-sided p-values:\n                 ストレス反応 ストレッサー得点 健康統制感\nストレス反応                  &lt;.0001           0.9962    \nストレッサー得点 &lt;.0001                        0.9419    \n健康統制感       0.9962       0.9419                     \n\n Adjusted p-values (Holm's method)\n                 ストレス反応 ストレッサー得点 健康統制感\nストレス反応                  &lt;.0001            1        \nストレッサー得点 &lt;.0001                         1        \n健康統制感        1            1                         \n\n\n\n6.1.5 3次元散布図（鳥瞰図）（P126-P130）\n\nデータ - アクティブデータセット内の変数の管理 - 変数名をつけ直すnames(PatientStress)[c(6)] &lt;- c(\"Control\")    # 健康統制感\nnames(PatientStress)[c(5)] &lt;- c(\"Stresser\")   # ストレッサー得点\nnames(PatientStress)[c(9)] &lt;- c(\"Response\")   # ストレス反応\n\n\n\n\n\n  \n\n\n\n\nグラフ - 3次元グラフ - 3次元散布図car::scatter3d(Response~Control+Stresser, data=PatientStress,\n               fit=c(\"linear\",\"smooth\"), bg=\"white\", axis.scales=TRUE,\n               grid=TRUE, ellipsoid=FALSE)\n\n\n\n本環境では実行できませんのでスクリーンショットで代用します。\n\n\n\nRGL Device",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>変数間の関係を探る</span>"
    ]
  },
  {
    "objectID": "wranglingData.html#複数の質的変数間の関連性p130-",
    "href": "wranglingData.html#複数の質的変数間の関連性p130-",
    "title": "\n6  変数間の関係を探る\n",
    "section": "\n6.2 複数の質的変数間の関連性（P130-）",
    "text": "6.2 複数の質的変数間の関連性（P130-）\n\n6.2.1 2元分割表（P130-P136）\n\n\n2元分割表\n2x2分割表\n\n\n\n\n統計量 - 分割表 - 2元表local({\n  .Table &lt;- xtabs(~日常苛立ち+ノンコンプライアンス, data=PatientStress)\n  cat(\"\\nFrequency table:\\n\")\n  print(.Table)\n  cat(\"\\nRow percentages:\\n\")\n  print(RcmdrMisc::rowPercents(.Table))\n  .Test &lt;- chisq.test(.Table, correct=FALSE)\n  print(.Test)\n})\n\n\nFrequency table:\n          ノンコンプライアンス\n日常苛立ち なし あり\n         0   79   39\n         1   55   34\n         3   34   38\n         6   34   24\n\nRow percentages:\n          ノンコンプライアンス\n日常苛立ち なし あり Total Count\n         0 66.9 33.1   100   118\n         1 61.8 38.2   100    89\n         3 47.2 52.8   100    72\n         6 58.6 41.4   100    58\n\n    Pearson's Chi-squared test\n\ndata:  .Table\nX-squared = 7.4341, df = 3, p-value = 0.05928\n\n\n\n\n\n統計量 - 分割表 - 2元表local({\n  .Table &lt;- xtabs(~性別+ノンコンプライアンス, data=PatientStress)\n  cat(\"\\nFrequency table:\\n\")\n  print(.Table)\n  cat(\"\\nRow percentages:\\n\")\n  print(RcmdrMisc::rowPercents(.Table))\n  .Test &lt;- chisq.test(.Table, correct=FALSE)\n  print(.Test)\n  cat(\"\\nExpected counts:\\n\")\n  print(.Test$expected) \n  print(fisher.test(.Table))\n})\n\n\nFrequency table:\n    ノンコンプライアンス\n性別 なし あり\n  男   68   51\n  女  134   84\n\nRow percentages:\n    ノンコンプライアンス\n性別 なし あり Total Count\n  男 57.1 42.9   100   119\n  女 61.5 38.5   100   218\n\n    Pearson's Chi-squared test\n\ndata:  .Table\nX-squared = 0.59969, df = 1, p-value = 0.4387\n\n\nExpected counts:\n    ノンコンプライアンス\n性別      なし     あり\n  男  71.32938 47.67062\n  女 130.67062 87.32938\n\n    Fisher's Exact Test for Count Data\n\ndata:  .Table\np-value = 0.4856\nalternative hypothesis: true odds ratio is not equal to 1\n95 percent confidence interval:\n 0.5180684 1.3524537\nsample estimates:\nodds ratio \n 0.8362745 \n\n\n\n\n\n\n6.2.2 多元分割表（P136-P139）\n\n\n多元分割表\n層別解析（女性の場合）\n\n\n\n\n統計量 - 分割表 - 多元表local({\n  .Table &lt;- xtabs(~日常苛立ち+ノンコンプライアンス+性別, data=PatientStress)\n  cat(\"\\nFrequency table:\\n\")\n  print(.Table)\n  cat(\"\\nRow percentages:\\n\")\n  print(RcmdrMisc::rowPercents(.Table)) \n})\n\n\nFrequency table:\n, , 性別 = 男\n\n          ノンコンプライアンス\n日常苛立ち なし あり\n         0   28   19\n         1   17   15\n         3   12   12\n         6   11    5\n\n, , 性別 = 女\n\n          ノンコンプライアンス\n日常苛立ち なし あり\n         0   51   20\n         1   38   19\n         3   22   26\n         6   23   19\n\n\nRow percentages:\n, , 性別 = 男\n\n          ノンコンプライアンス\n日常苛立ち なし あり Total Count\n         0 59.6 40.4   100    47\n         1 53.1 46.9   100    32\n         3 50.0 50.0   100    24\n         6 68.8 31.2   100    16\n\n, , 性別 = 女\n\n          ノンコンプライアンス\n日常苛立ち なし あり Total Count\n         0 71.8 28.2   100    71\n         1 66.7 33.3   100    57\n         3 45.8 54.2   100    48\n         6 54.8 45.2   100    42\n\n\n\n\n\n統計量 - 分割表 - 2元表local({\n  .Table &lt;- xtabs(~日常苛立ち+ノンコンプライアンス, data=PatientStress,\n                  subset=性別==\"女\")\n  cat(\"\\nFrequency table:\\n\")\n  print(.Table)\n  cat(\"\\nRow percentages:\\n\")\n  print(RcmdrMisc::rowPercents(.Table))\n  .Test &lt;- chisq.test(.Table, correct=FALSE)\n  print(.Test)\n})\n\n\nFrequency table:\n          ノンコンプライアンス\n日常苛立ち なし あり\n         0   51   20\n         1   38   19\n         3   22   26\n         6   23   19\n\nRow percentages:\n          ノンコンプライアンス\n日常苛立ち なし あり Total Count\n         0 71.8 28.2   100    71\n         1 66.7 33.3   100    57\n         3 45.8 54.2   100    48\n         6 54.8 45.2   100    42\n\n    Pearson's Chi-squared test\n\ndata:  .Table\nX-squared = 9.6211, df = 3, p-value = 0.02208",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>変数間の関係を探る</span>"
    ]
  },
  {
    "objectID": "estimationAndTest.html",
    "href": "estimationAndTest.html",
    "title": "\n7  平均に関する推定と検定\n",
    "section": "",
    "text": "7.1 1標本における母平均に関する推測（P140）",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>平均に関する推定と検定</span>"
    ]
  },
  {
    "objectID": "estimationAndTest.html#標本における母平均に関する推測p140",
    "href": "estimationAndTest.html#標本における母平均に関する推測p140",
    "title": "\n7  平均に関する推定と検定\n",
    "section": "",
    "text": "7.1.1 母平均に関するt検定（P141）\n　t検定は「母平均はある特定の値に等しい（または、大きい・小さい）」という帰無仮説\\(H_0\\)（null hypothesis）をテスト（両側検定または片側検定）する手法です。テストが成功（p値が事前に設定した有意水準より小さい）すれば帰無仮説\\(H_0\\)は棄却され対立仮説\\(H_1\\)（alternative hypothesis）が採用されます。逆にテストが失敗（p値が有意水準より大きい）すれば帰無仮説\\(H_0\\)は棄却されません。\n\n\n両側検定\n片側検定（\\(\\mu \\lt \\mu_0\\)）\n片側検定（\\(\\mu \\gt \\mu_0\\)）\nヒストグラム\n\n\n\n　母平均\\(\\mu \\ne \\mu_0\\)の両側検定。\n\n統計量 - 平均 - 1標本t検定with(PatientStress,\n     (t.test(健康統制感, alternative = \"two.sided\",\n             mu = 100, conf.level = .95)))\n\n\n    One Sample t-test\n\ndata:  健康統制感\nt = -11.468, df = 336, p-value &lt; 2.2e-16\nalternative hypothesis: true mean is not equal to 100\n95 percent confidence interval:\n 89.99854 92.92728\nsample estimates:\nmean of x \n 91.46291 \n\n\n\n\n　テキストにはありません。\n\n統計量 - 平均 - 1標本t検定with(PatientStress,\n     (t.test(健康統制感, alternative = \"less\",\n             mu = 100, conf.level = .95)))\n\n\n    One Sample t-test\n\ndata:  健康統制感\nt = -11.468, df = 336, p-value &lt; 2.2e-16\nalternative hypothesis: true mean is less than 100\n95 percent confidence interval:\n    -Inf 92.6908\nsample estimates:\nmean of x \n 91.46291 \n\n\n\n\n　テキストにはありません。\n\n統計量 - 平均 - 1標本t検定with(PatientStress,\n     (t.test(健康統制感, alternative = \"greater\",\n             mu = 100, conf.level = .95)))\n\n\n    One Sample t-test\n\ndata:  健康統制感\nt = -11.468, df = 336, p-value = 1\nalternative hypothesis: true mean is greater than 100\n95 percent confidence interval:\n 90.23501      Inf\nsample estimates:\nmean of x \n 91.46291 \n\n\n\n\n\nグラフ - ヒストグラムwith(PatientStress, RcmdrMisc::Hist(健康統制感,\n                                    scale=\"frequency\", breaks=\"Sturges\",\n                                    col=\"darkgray\"))\nabline(v = 100, col = \"red\")\n\n\n\n\n\n\n\n\n\n\n\n7.1.2 1標本ウィルコクソン検定（P143）\n\n\n両側検定\n片側検定（\\(\\mu \\lt \\mu_0\\)）\n片側検定（\\(\\mu \\gt \\mu_0\\)）\nヒストグラム\n\n\n\n　ウィルコクソン検定は変数が正規分布に従わない場合に用いる検定です。\n統計量 - ノンパラメトリック検定 - 1標本Wilcoxon検定with(PatientStress, median(ストレス反応得点, na.rm=TRUE))\nwith(PatientStress, mean(ストレス反応得点, na.rm=TRUE))\nwith(PatientStress,\n     wilcox.test(ストレス反応得点, alternative='two.sided', mu=30))\n\n\n\n[1] 25\n\n\n\n\n[1] 34.89911\n\n\n\n\n\n    Wilcoxon signed rank test with continuity correction\n\ndata:  ストレス反応得点\nV = 28410, p-value = 0.8792\nalternative hypothesis: true location is not equal to 30\n\n\n\n\n\n　テキストにはありません。\n統計量 - ノンパラメトリック検定 - 1標本Wilcoxon検定with(PatientStress, median(ストレス反応得点, na.rm=TRUE))\nwith(PatientStress, mean(ストレス反応得点, na.rm=TRUE))\nwith(PatientStress,\n     wilcox.test(ストレス反応得点, alternative='less', mu=30))\n\n\n\n[1] 25\n\n\n\n\n[1] 34.89911\n\n\n\n\n\n    Wilcoxon signed rank test with continuity correction\n\ndata:  ストレス反応得点\nV = 28410, p-value = 0.5606\nalternative hypothesis: true location is less than 30\n\n\n\n\n\n　テキストにはありません。\n統計量 - ノンパラメトリック検定 - 1標本Wilcoxon検定with(PatientStress, median(ストレス反応得点, na.rm=TRUE))\nwith(PatientStress, mean(ストレス反応得点, na.rm=TRUE))\nwith(PatientStress,\n     wilcox.test(ストレス反応得点, alternative='greater', mu=30))\n\n\n\n[1] 25\n\n\n\n\n[1] 34.89911\n\n\n\n\n\n    Wilcoxon signed rank test with continuity correction\n\ndata:  ストレス反応得点\nV = 28410, p-value = 0.4396\nalternative hypothesis: true location is greater than 30\n\n\n\n\n\n\nCodewith(PatientStress, RcmdrMisc::Hist(ストレス反応得点,\n                                    scale=\"frequency\", breaks=\"Sturges\",\n                                    col=\"darkgray\"))",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>平均に関する推定と検定</span>"
    ]
  },
  {
    "objectID": "estimationAndTest.html#独立な2標本における母平均に関する推定p146",
    "href": "estimationAndTest.html#独立な2標本における母平均に関する推定p146",
    "title": "\n7  平均に関する推定と検定\n",
    "section": "\n7.2 独立な2標本における母平均に関する推定（P146）",
    "text": "7.2 独立な2標本における母平均に関する推定（P146）\n\n7.2.1 母平均の差に関するt検定と区間推定（P147）\n\n\n両側検定\n片側検定（\\(\\mu_a - \\mu_b \\lt 0\\)）\n片側検定（\\(\\mu_a - \\mu_b\\) ）\nヒストグラム\n\n\n\n　平均の差\\(\\mu_a - \\mu_b \\ne 0\\)の両側検定。\n\n統計量 - 平均 - 独立サンプルt検定t.test(健康統制感 ~ 性別, alternative = \"two.sided\", var.equal = TRUE,\n       data = PatientStress)\n\n\n    Two Sample t-test\n\ndata:  健康統制感 by 性別\nt = 0.049249, df = 335, p-value = 0.9608\nalternative hypothesis: true difference in means between group 男 and group 女 is not equal to 0\n95 percent confidence interval:\n -2.991696  3.145347\nsample estimates:\nmean in group 男 mean in group 女 \n        91.51261         91.43578 \n\n\n\n\n　テキストにはありません。\n\n統計量 - 平均 - 独立サンプルt検定t.test(健康統制感 ~ 性別, alternative = \"less\", var.equal = TRUE,\n       data = PatientStress)\n\n\n    Two Sample t-test\n\ndata:  健康統制感 by 性別\nt = 0.049249, df = 335, p-value = 0.5196\nalternative hypothesis: true difference in means between group 男 and group 女 is less than 0\n95 percent confidence interval:\n     -Inf 2.649821\nsample estimates:\nmean in group 男 mean in group 女 \n        91.51261         91.43578 \n\n\n\n\n　テキストにはありません。\n\n統計量 - 平均 - 独立サンプルt検定t.test(健康統制感 ~ 性別, alternative = \"greater\", var.equal = TRUE,\n       data = PatientStress)\n\n\n    Two Sample t-test\n\ndata:  健康統制感 by 性別\nt = 0.049249, df = 335, p-value = 0.4804\nalternative hypothesis: true difference in means between group 男 and group 女 is greater than 0\n95 percent confidence interval:\n -2.496171       Inf\nsample estimates:\nmean in group 男 mean in group 女 \n        91.51261         91.43578 \n\n\n\n\n\nグラフ - ヒストグラムwith(PatientStress, RcmdrMisc::Hist(健康統制感, groups=性別,\n                                    scale=\"frequency\", breaks=\"Sturges\",\n                                    col=\"darkgray\"))\n\n\n\n\n\n\n\n\n\n\n\n7.2.2 2標本ウィルコクソン検定（P149）\n\n\n両側検定\n片側検定（\\(\\mu_a \\lt \\mu_b\\)）\n片側検定（\\(\\mu_a \\gt \\mu_b\\)）\nヒストグラム\n\n\n\n　ウィルコクソン検定は変数が正規分布に従わない場合に用いる検定です。\n統計量 - ノンパラメトリック検定 - 2標本ウィルコクソン検定car::Tapply(ストレス反応得点 ~ 性別, median, na.action=na.omit,\n            data=PatientStress) # medians by group\nwilcox.test(ストレス反応得点 ~ 性別, alternative=\"two.sided\",\n            data=PatientStress)\n\n\n\n男 女 \n19 31 \n\n\n\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 性別\nW = 9830, p-value = 0.000238\nalternative hypothesis: true location shift is not equal to 0\n\n\n\n\n\n　テキストにはありません。\n統計量 - ノンパラメトリック検定 - 2標本ウィルコクソン検定car::Tapply(ストレス反応得点 ~ 性別, median, na.action=na.omit,\n            data=PatientStress) # medians by group\nwilcox.test(ストレス反応得点 ~ 性別, alternative=\"less\",\n            data=PatientStress)\n\n\n\n男 女 \n19 31 \n\n\n\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 性別\nW = 9830, p-value = 0.000119\nalternative hypothesis: true location shift is less than 0\n\n\n\n\n\n　テキストにはありません。\n統計量 - ノンパラメトリック検定 - 2標本ウィルコクソン検定car::Tapply(ストレス反応得点 ~ 性別, median, na.action=na.omit,\n            data=PatientStress) # medians by group\nwilcox.test(ストレス反応得点 ~ 性別, alternative=\"greater\",\n            data=PatientStress)\n\n\n\n男 女 \n19 31 \n\n\n\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 性別\nW = 9830, p-value = 0.9999\nalternative hypothesis: true location shift is greater than 0\n\n\n\n\n\n\nグラフ - ヒストグラムwith(PatientStress, RcmdrMisc::Hist(ストレス反応得点, groups=性別,\n                                    scale=\"frequency\", breaks=\"Sturges\",\n                                    col=\"darkgray\"))",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>平均に関する推定と検定</span>"
    ]
  },
  {
    "objectID": "estimationAndTest.html#対応のある標本における平均の差に関する推測p152",
    "href": "estimationAndTest.html#対応のある標本における平均の差に関する推測p152",
    "title": "\n7  平均に関する推定と検定\n",
    "section": "\n7.3 対応のある標本における平均の差に関する推測（P152）",
    "text": "7.3 対応のある標本における平均の差に関する推測（P152）\n\n\n\n\n\n\nデータの読み込み\n\n\n\n\n\n\nRcmdrのメニューから［データ］-［データセットのロード…］を実行する\nファイルダイアログで「バイタルサイン.RData」ファイルを選択する\nアクティブデータセットがVitalSignになっていることを確認する\n\n\n\n\n\n\n\n  \n\n\n\n\n7.3.1 対応のある標本のt検定と区間推定（P153）\n\n\n両側検定\n片側検定（\\(\\mu_1 - \\mu_2 \\lt 0\\)）\n片側検定（\\(\\mu_1 - \\mu_2 \\gt 0\\)）\nヒストグラム\n\n\n\n　平均の差\\(\\mu_1 - \\mu_2 \\ne 0\\)の両側検定。\n\n統計量 - 平均 - 対応のあるt検定with(VitalSign, (t.test(運動後収縮期血圧, 安静時収縮期血圧,\n                        alternative = \"two.sided\", conf.level = .95,\n                        paired=TRUE)))\n\n\n    Paired t-test\n\ndata:  運動後収縮期血圧 and 安静時収縮期血圧\nt = 10.588, df = 56, p-value = 5.535e-15\nalternative hypothesis: true mean difference is not equal to 0\n95 percent confidence interval:\n 12.48919 18.31783\nsample estimates:\nmean difference \n       15.40351 \n\n\n\n\n　テキストにはありません。\n\n統計量 - 平均 - 対応のあるt検定with(VitalSign, (t.test(運動後収縮期血圧, 安静時収縮期血圧,\n                        alternative = \"less\", conf.level = .95,\n                        paired=TRUE)))\n\n\n    Paired t-test\n\ndata:  運動後収縮期血圧 and 安静時収縮期血圧\nt = 10.588, df = 56, p-value = 1\nalternative hypothesis: true mean difference is less than 0\n95 percent confidence interval:\n    -Inf 17.8367\nsample estimates:\nmean difference \n       15.40351 \n\n\n\n\n　テキストにはありません。\n\n統計量 - 平均 - 対応のあるt検定with(VitalSign, (t.test(運動後収縮期血圧, 安静時収縮期血圧,\n                        alternative = \"greater\", conf.level = .95,\n                        paired=TRUE)))\n\n\n    Paired t-test\n\ndata:  運動後収縮期血圧 and 安静時収縮期血圧\nt = 10.588, df = 56, p-value = 2.768e-15\nalternative hypothesis: true mean difference is greater than 0\n95 percent confidence interval:\n 12.97032      Inf\nsample estimates:\nmean difference \n       15.40351 \n\n\n\n\nグラフ - ヒストグラムwith(VitalSign, RcmdrMisc::Hist(運動後収縮期血圧, scale=\"frequency\",\n                                breaks=seq(70, 160, 10), col=\"darkgray\"))\nwith(VitalSign, RcmdrMisc::Hist(安静時収縮期血圧, scale=\"frequency\",\n                                breaks=seq(70, 160, 10), col=\"darkgray\"))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n7.3.2 ウィルコクソンの符号付き順位検定（P155）\n\n\n両側検定\n片側検定（\\(\\mu_1 - \\mu_2 \\lt 0\\)）\n片側検定（\\(\\mu_1 - \\mu_2 \\gt 0\\)）\nヒストグラム\n中央値\n\n\n\n　平均の差\\(\\mu_1 - \\mu_2 \\ne 0\\)の両側検定。\n\n統計量 - ノンパラメトリック検定 - 対応のあるウィルコクソン検定with(VitalSign, wilcox.test(運動後呼吸数, 安静時呼吸数,\n                            alternative='two.sided', paired=TRUE))\n\n\n    Wilcoxon signed rank test with continuity correction\n\ndata:  運動後呼吸数 and 安静時呼吸数\nV = 1427.5, p-value = 2.931e-10\nalternative hypothesis: true location shift is not equal to 0\n\n\n\n\n　テキストにはありません。\n\n統計量 - ノンパラメトリック検定 - 対応のあるウィルコクソン検定with(VitalSign, wilcox.test(運動後呼吸数, 安静時呼吸数,\n                            alternative='less', paired=TRUE))\n\n\n    Wilcoxon signed rank test with continuity correction\n\ndata:  運動後呼吸数 and 安静時呼吸数\nV = 1427.5, p-value = 1\nalternative hypothesis: true location shift is less than 0\n\n\n\n\n　テキストにはありません。\n\n統計量 - ノンパラメトリック検定 - 対応のあるウィルコクソン検定with(VitalSign, wilcox.test(運動後呼吸数, 安静時呼吸数,\n                            alternative='greater', paired=TRUE))\n\n\n    Wilcoxon signed rank test with continuity correction\n\ndata:  運動後呼吸数 and 安静時呼吸数\nV = 1427.5, p-value = 1.465e-10\nalternative hypothesis: true location shift is greater than 0\n\n\n\n\n　テキストにはありません。\nグラフ - ヒストグラムwith(VitalSign,\n     RcmdrMisc::Hist(運動後呼吸数, scale=\"frequency\",\n                     breaks=seq(5, 60, 5), col=\"darkgray\"))\nwith(VitalSign,\n     RcmdrMisc::Hist(安静時呼吸数, scale=\"frequency\",\n                     breaks=seq(5, 60, 5), col=\"darkgray\"))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n　テキストにはありません。\n統計量 - 要約 - 数値による要約RcmdrMisc::numSummary(VitalSign[,\"運動後呼吸数\", drop=FALSE],\n                      statistics=c(\"quantiles\"), quantiles=c(.5))\nRcmdrMisc::numSummary(VitalSign[,\"安静時呼吸数\", drop=FALSE],\n                      statistics=c(\"quantiles\"), quantiles=c(.5))\n\n\n\n50% \n 25 \n\n\n\n\n50% \n 16 \n\n\n\n\n\n\n\n\n\n\n\n\n数値による要約の制約事項\n\n\n\n\n\n数値による要約（numSummary()関数）では、統計量タブにおいてすべてのチェックを外すとエラーになります。中央値を求める場合は「四分位範囲」のみにチェックを入れ、分位数に0.5を指定してください。 または、Rスクリプトのタブで下記のようにmedian()関数を実行してください。\n統計量 - 要約 - 数値による要約with(VitalSign, median(運動後呼吸数))\nwith(VitalSign, median(安静時呼吸数))\n\n\n\n[1] 25\n\n\n\n\n[1] 16",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>平均に関する推定と検定</span>"
    ]
  },
  {
    "objectID": "varTest.html",
    "href": "varTest.html",
    "title": "\n8  分散に関する検定\n",
    "section": "",
    "text": "8.1 等分散性に関するF検定 2つの集団（P158）\nF検定はふたつの集団がともに正規分布にしたがう場合、統計量\\(F\\)（2群の標準偏差の比）はF分布に従うを利用した検定です。帰無仮説\\(H_0\\)は「分散の比は1に等しい（2群の分散は等しい）」（両側仮説）で、対立仮説\\(H_1\\)は「分散の比は1と等しくない」（両側仮説）です。",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>分散に関する検定</span>"
    ]
  },
  {
    "objectID": "varTest.html#等分散性に関するf検定-2つの集団p158",
    "href": "varTest.html#等分散性に関するf検定-2つの集団p158",
    "title": "\n8  分散に関する検定\n",
    "section": "",
    "text": "両側検定\n片側検定（\\(\\frac{\\sigma_2^2}{\\sigma_1^2} \\lt 1\\)）\n片側検定（\\(\\frac{\\sigma_2^2}{\\sigma_1^2} \\gt 1\\)）\nヒストグラム\n\n\n\n　母分散比\\(\\frac{\\sigma_2^2}{\\sigma_1^2} \\ne 1\\)の両側検定。\n統計量 - 分散 - 分散の比のF検定car::Tapply(健康統制感 ~ 性別, var, na.action=na.omit,\n            data=PatientStress) # variances by group\nvar.test(健康統制感 ~ 性別, alternative='two.sided', conf.level=.95,\n         data=PatientStress)\n\n\n\n      男       女 \n212.9299 173.3991 \n\n\n\n\n\n    F test to compare two variances\n\ndata:  健康統制感 by 性別\nF = 1.228, num df = 118, denom df = 217, p-value = 0.1952\nalternative hypothesis: true ratio of variances is not equal to 1\n95 percent confidence interval:\n 0.9000029 1.7010485\nsample estimates:\nratio of variances \n          1.227976 \n\n\n\n　帰無仮説は\\(5\\%\\)有意水準で棄却されません（テストは失敗です）ので、帰無仮説が採択され健康統制感の分散は男女で等しいと言えます。\n\n\n　テキストにはありません。\n統計量 - 分散 - 分散の比のF検定car::Tapply(健康統制感 ~ 性別, var, na.action=na.omit,\n            data=PatientStress) # variances by group\nvar.test(健康統制感 ~ 性別, alternative='less', conf.level=.95,\n         data=PatientStress)\n\n\n\n      男       女 \n212.9299 173.3991 \n\n\n\n\n\n    F test to compare two variances\n\ndata:  健康統制感 by 性別\nF = 1.228, num df = 118, denom df = 217, p-value = 0.9024\nalternative hypothesis: true ratio of variances is less than 1\n95 percent confidence interval:\n 0.000000 1.613525\nsample estimates:\nratio of variances \n          1.227976 \n\n\n\n\n\n　テキストにはありません。\n統計量 - 分散 - 分散の比のF検定car::Tapply(健康統制感 ~ 性別, var, na.action=na.omit,\n            data=PatientStress) # variances by group\nvar.test(健康統制感 ~ 性別, alternative='greater', conf.level=.95,\n         data=PatientStress)\n\n\n\n      男       女 \n212.9299 173.3991 \n\n\n\n\n\n    F test to compare two variances\n\ndata:  健康統制感 by 性別\nF = 1.228, num df = 118, denom df = 217, p-value = 0.09758\nalternative hypothesis: true ratio of variances is greater than 1\n95 percent confidence interval:\n 0.9460203       Inf\nsample estimates:\nratio of variances \n          1.227976 \n\n\n\n\n\n　テキストにはありません。\n\nグラフ - ヒストグラムwith(PatientStress, RcmdrMisc::Hist(健康統制感, groups=性別,\n                                    scale=\"frequency\", breaks=\"Sturges\",\n                                    col=\"darkgray\"))",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>分散に関する検定</span>"
    ]
  },
  {
    "objectID": "varTest.html#ルービン検定-3つ以上の集団p161",
    "href": "varTest.html#ルービン検定-3つ以上の集団p161",
    "title": "\n8  分散に関する検定\n",
    "section": "\n8.2 ルービン検定 3つ以上の集団（P161）",
    "text": "8.2 ルービン検定 3つ以上の集団（P161）\n\n\nルービン検定\nバートレットの検定\nヒストグラム\n\n\n\nルービン検定の帰無仮設\\(H_0\\)は「すべての水準で分散は等しい」ですので、対立仮説\\(H_1\\)は「あらゆる水準で分散が異なる」の両側検定になります。\n統計量 - 分散 - ルービン検定car::Tapply(健康統制感 ~ 年齢区分, var, na.action=na.omit,\n            data=PatientStress) # variances by group\ncar::leveneTest(健康統制感 ~ 年齢区分, data=PatientStress,\n                center=\"median\")\n\n\n\n    青年     壮年     中年     高年 \n166.8805 152.5515 189.6079 202.5386 \n\n\n\n\nLevene's Test for Homogeneity of Variance (center = \"median\")\n       Df F value Pr(&gt;F)\ngroup   3  0.3037 0.8228\n      333               \n\n\n\n　帰無仮説は\\(5\\%\\)有意水準で棄却されません（テストは失敗です）ので、帰無仮説が採択され健康統制感の分散はすべての年齢区分で等しいと言えます。\n\n\n　テキストにはありません。\n\n統計量 - 分散 - バートレットの検定bartlett.test(健康統制感 ~ 年齢区分, data=PatientStress)\n\n\n    Bartlett test of homogeneity of variances\n\ndata:  健康統制感 by 年齢区分\nBartlett's K-squared = 1.298, df = 3, p-value = 0.7296\n\n\n\n\n　テキストにはありません。\n\nグラフ - ヒストグラムwith(PatientStress, RcmdrMisc::Hist(健康統制感, groups=年齢区分,\n                                    scale=\"frequency\", breaks=\"Sturges\",\n                                    col=\"darkgray\"))",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>分散に関する検定</span>"
    ]
  },
  {
    "objectID": "ANOVA.html",
    "href": "ANOVA.html",
    "title": "\n9  分散分析\n",
    "section": "",
    "text": "9.1 1元配置分散分析（P158）",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>分散分析</span>"
    ]
  },
  {
    "objectID": "ANOVA.html#元配置分散分析p158",
    "href": "ANOVA.html#元配置分散分析p158",
    "title": "\n9  分散分析\n",
    "section": "",
    "text": "9.1.1 正規分布の場合（P164）\n統計量 - 平均 - 1元配置分散分析AnovaModel.1 &lt;- aov(健康統制感 ~ 年齢区分, data = PatientStress)\nsummary(AnovaModel.1)\nwith(PatientStress, RcmdrMisc::numSummary(健康統制感, groups = 年齢区分,\n                                          statistics=c('mean', 'sd')))\n# 多重検定で水準間の平均値の差を確認する\nlocal({\n .Pairs &lt;- multcomp::glht(AnovaModel.1,\n                          linfct = multcomp::mcp(年齢区分 = \"Tukey\"))\n print(summary(.Pairs)) # pairwise tests\n print(confint(.Pairs, level=0.95)) # confidence intervals\n print(multcomp::cld(.Pairs, level=0.05)) # compact letter display\n old.oma &lt;- par(oma=c(0, 5, 0, 0))\n plot(confint(.Pairs))\n par(old.oma)\n})\n\n\n\n             Df Sum Sq Mean Sq F value   Pr(&gt;F)    \n年齢区分      3   4478    1493    8.53 1.79e-05 ***\nResiduals   333  58275     175                     \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n\n          mean       sd data:n\n青年  89.57895 12.91822    171\n壮年  89.86047 12.35117     43\n中年  91.26582 13.76982     79\n高年 100.70455 14.23161     44\n\n\n\n\n\n     Simultaneous Tests for General Linear Hypotheses\n\nMultiple Comparisons of Means: Tukey Contrasts\n\n\nFit: aov(formula = 健康統制感 ~ 年齢区分, data = PatientStress)\n\nLinear Hypotheses:\n                 Estimate Std. Error t value Pr(&gt;|t|)    \n壮年 - 青年 == 0   0.2815     2.2568   0.125  0.99928    \n中年 - 青年 == 0   1.6869     1.7996   0.937  0.77946    \n高年 - 青年 == 0  11.1256     2.2362   4.975  &lt; 0.001 ***\n中年 - 壮年 == 0   1.4054     2.5070   0.561  0.94188    \n高年 - 壮年 == 0  10.8441     2.8367   3.823  &lt; 0.001 ***\n高年 - 中年 == 0   9.4387     2.4885   3.793  0.00108 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n(Adjusted p values reported -- single-step method)\n\n\n     Simultaneous Confidence Intervals\n\nMultiple Comparisons of Means: Tukey Contrasts\n\n\nFit: aov(formula = 健康統制感 ~ 年齢区分, data = PatientStress)\n\nQuantile = 2.5679\n95% family-wise confidence level\n \n\nLinear Hypotheses:\n                 Estimate lwr     upr    \n壮年 - 青年 == 0  0.2815  -5.5137  6.0767\n中年 - 青年 == 0  1.6869  -2.9343  6.3080\n高年 - 青年 == 0 11.1256   5.3833 16.8679\n中年 - 壮年 == 0  1.4054  -5.0323  7.8430\n高年 - 壮年 == 0 10.8441   3.5597 18.1285\n高年 - 中年 == 0  9.4387   3.0486 15.8288\n\n青年 壮年 中年 高年 \n \"a\"  \"a\"  \"a\"  \"b\" \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n多重比較\n\n\n\n\n\n一元配置分散分析\n一元配置分散分析（ANOVA）の帰無仮設\\(H_0\\)は「すべての水準の平均は等しい」です。したがって、対立仮説\\(H_1\\)は「すくなくとも一つの水準間の平均に差がある」となります。すなわち、帰無仮設\\(H_0\\)が棄却された場合にはどの水準間に差があるのかまでは分かりません。\n\n一元配置分散分析summary(AnovaModel.1)\n\n             Df Sum Sq Mean Sq F value   Pr(&gt;F)    \n年齢区分      3   4478    1493    8.53 1.79e-05 ***\nResiduals   333  58275     175                     \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n多重比較\nどの水準間に差があるのかを確認するためには一元配置分散分析（aov()）とは別に多重比較を行う必要があります。\n\n多重比較（テューキー・クレーマー法）summary(multcomp::glht(AnovaModel.1,\n                       linfct = multcomp::mcp(年齢区分 = \"Tukey\")))\n\n\n     Simultaneous Tests for General Linear Hypotheses\n\nMultiple Comparisons of Means: Tukey Contrasts\n\n\nFit: aov(formula = 健康統制感 ~ 年齢区分, data = PatientStress)\n\nLinear Hypotheses:\n                 Estimate Std. Error t value Pr(&gt;|t|)    \n壮年 - 青年 == 0   0.2815     2.2568   0.125  0.99928    \n中年 - 青年 == 0   1.6869     1.7996   0.937  0.77945    \n高年 - 青年 == 0  11.1256     2.2362   4.975  &lt; 0.001 ***\n中年 - 壮年 == 0   1.4054     2.5070   0.561  0.94189    \n高年 - 壮年 == 0  10.8441     2.8367   3.823  0.00101 ** \n高年 - 中年 == 0   9.4387     2.4885   3.793  &lt; 0.001 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n(Adjusted p values reported -- single-step method)\n\n\n信頼区間\n各水準間の平均値の差（推定値）が求められましたので、それを元に信頼区間を求めます。\n\n信頼区間confint(multcomp::glht(AnovaModel.1,\n                       linfct = multcomp::mcp(年齢区分 = \"Tukey\")),\n        level = 0.95)\n\n\n     Simultaneous Confidence Intervals\n\nMultiple Comparisons of Means: Tukey Contrasts\n\n\nFit: aov(formula = 健康統制感 ~ 年齢区分, data = PatientStress)\n\nQuantile = 2.5693\n95% family-wise confidence level\n \n\nLinear Hypotheses:\n                 Estimate lwr     upr    \n壮年 - 青年 == 0  0.2815  -5.5168  6.0799\n中年 - 青年 == 0  1.6869  -2.9368  6.3106\n高年 - 青年 == 0 11.1256   5.3801 16.8711\n中年 - 壮年 == 0  1.4054  -5.0358  7.8465\n高年 - 壮年 == 0 10.8441   3.5557 18.1324\n高年 - 中年 == 0  9.4387   3.0452 15.8323\n\n\nこの結果をプロットするとR Commanderが出力したグラフになります。\n\n多重比較の可視化plot(confint(multcomp::glht(AnovaModel.1,\n                            linfct = multcomp::mcp(年齢区分 = \"Tukey\")),\n             level = 0.95))\n\n\n\n\n\n\n\n別の方法\nR　Commanderでは複数の手順を経由して多重比較を可視化していますが標準で組み込まれているTukeyHSD()関数を使うと一度で求めることが可能です。なお、R Commanderがこのような手順を踏んでいる理由は分かりません。\n多重比較の可視化（テューキー・クレーマー法）TukeyHSD(aov(健康統制感 ~ 年齢区分, data = PatientStress)) |&gt; \n  print() |&gt; \n  plot()\n\n\n\n  Tukey multiple comparisons of means\n    95% family-wise confidence level\n\nFit: aov(formula = 健康統制感 ~ 年齢区分, data = PatientStress)\n\n$年齢区分\n                diff       lwr       upr     p adj\n壮年-青年  0.2815177 -5.545682  6.108717 0.9993054\n中年-青年  1.6868754 -2.959815  6.333565 0.7847628\n高年-青年 11.1255981  5.351554 16.899643 0.0000062\n中年-壮年  1.4053577 -5.067819  7.878534 0.9436070\n高年-壮年 10.8440803  3.519473 18.168688 0.0009027\n高年-中年  9.4387227  3.013355 15.864090 0.0010111\n\n\n\n\n\n\n\n\n\n\n\n\n9.1.2 クラスカル・ウォリス検定（P168）\n統計量 - ノンパラメトリック検定 - クラスカル・ウォリス検定car::Tapply(ストレス反応得点 ~ 年齢区分, median, na.action=na.omit,\n            data=PatientStress) # medians by group\nkruskal.test(ストレス反応得点 ~ 年齢区分, data=PatientStress)\n\n\n\n青年 壮年 中年 高年 \n33.0 27.0 15.0 11.5 \n\n\n\n\n\n    Kruskal-Wallis rank sum test\n\ndata:  ストレス反応得点 by 年齢区分\nKruskal-Wallis chi-squared = 47.672, df = 3, p-value = 2.501e-10\n\n\n\n\n\n\n\n\n\n多重比較（テキストの方法）\n\n\n\n\n\n\nデータ - アクティブデータセット - アクティブデータセットの部分集合を抽出df1 &lt;- subset(PatientStress, subset=年齢区分 %in% c(\"青年\", \"壮年\"))\ndf2 &lt;- subset(PatientStress, subset=年齢区分 %in% c(\"青年\", \"中年\"))\ndf3 &lt;- subset(PatientStress, subset=年齢区分 %in% c(\"青年\", \"高年\"))\ndf4 &lt;- subset(PatientStress, subset=年齢区分 %in% c(\"壮年\", \"中年\"))\ndf5 &lt;- subset(PatientStress, subset=年齢区分 %in% c(\"壮年\", \"高年\"))\ndf6 &lt;- subset(PatientStress, subset=年齢区分 %in% c(\"中年\", \"高年\"))\n\n\nアクティブデータセットを切り替えながら検定を行います。有意水準はボフェローニ補正により \\(p \\lt \\frac{0.05}{6} = 0.0083333\\) となります。\n\n統計量 - ノンパラメトリック検定 - 2標本ウィルコクソン検定with(df1, wilcox.test(ストレス反応得点 ~ 年齢区分, alternative=\"two.sided\"))\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 4233.5, p-value = 0.1252\nalternative hypothesis: true location shift is not equal to 0\n\n統計量 - ノンパラメトリック検定 - 2標本ウィルコクソン検定with(df2, wilcox.test(ストレス反応得点 ~ 年齢区分, alternative=\"two.sided\"))\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 9563, p-value = 1.266e-07\nalternative hypothesis: true location shift is not equal to 0\n\n統計量 - ノンパラメトリック検定 - 2標本ウィルコクソン検定with(df3, wilcox.test(ストレス反応得点 ~ 年齢区分, alternative=\"two.sided\"))\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 5810.5, p-value = 2.603e-08\nalternative hypothesis: true location shift is not equal to 0\n\n統計量 - ノンパラメトリック検定 - 2標本ウィルコクソン検定with(df4, wilcox.test(ストレス反応得点 ~ 年齢区分, alternative=\"two.sided\"))\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 2149, p-value = 0.01583\nalternative hypothesis: true location shift is not equal to 0\n\n統計量 - ノンパラメトリック検定 - 2標本ウィルコクソン検定with(df5, wilcox.test(ストレス反応得点 ~ 年齢区分, alternative=\"two.sided\"))\n\nWarning in wilcox.test.default(x = DATA[[1L]], y = DATA[[2L]], ...):\nタイがあるため、正確な p 値を計算することができません\n\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 1335.5, p-value = 0.000951\nalternative hypothesis: true location shift is not equal to 0\n\n統計量 - ノンパラメトリック検定 - 2標本ウィルコクソン検定with(df6, wilcox.test(ストレス反応得点 ~ 年齢区分, alternative=\"two.sided\"))\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 1992, p-value = 0.1804\nalternative hypothesis: true location shift is not equal to 0\n\n\n\n\n\n\n\n\n\n\n\n多重比較（コードを書く方法）\n\n\n\n\n\n\nあまりエレガントでない方法ageCalssLvls &lt;- combn(levels(PatientStress$年齢区分), 2) |&gt; \n  t() |&gt; \n  as.data.frame()\nageCalssLvls\n\n    V1   V2\n1 青年 壮年\n2 青年 中年\n3 青年 高年\n4 壮年 中年\n5 壮年 高年\n6 中年 高年\n\nあまりエレガントでない方法for (i in c(1:nrow(ageCalssLvls))) {\n  subset(PatientStress, PatientStress$年齢区分 %in% \n         c(ageCalssLvls$V1[i], ageCalssLvls$V2[i])) |&gt;\n    with(wilcox.test(ストレス反応得点 ~ 年齢区分)) |&gt; \n    print()\n  print(\"----------\")\n}\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 4233.5, p-value = 0.1252\nalternative hypothesis: true location shift is not equal to 0\n\n[1] \"----------\"\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 9563, p-value = 1.266e-07\nalternative hypothesis: true location shift is not equal to 0\n\n[1] \"----------\"\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 5810.5, p-value = 2.603e-08\nalternative hypothesis: true location shift is not equal to 0\n\n[1] \"----------\"\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 2149, p-value = 0.01583\nalternative hypothesis: true location shift is not equal to 0\n\n[1] \"----------\"\n\n\nWarning in wilcox.test.default(x = DATA[[1L]], y = DATA[[2L]], ...):\nタイがあるため、正確な p 値を計算することができません\n\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 1335.5, p-value = 0.000951\nalternative hypothesis: true location shift is not equal to 0\n\n[1] \"----------\"\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ストレス反応得点 by 年齢区分\nW = 1992, p-value = 0.1804\nalternative hypothesis: true location shift is not equal to 0\n\n[1] \"----------\"\n\n\n\n\n\n\n\n\n\n\n\n多重比較（エレガントな方法）\n\n\n\n\n\n（検討中）",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>分散分析</span>"
    ]
  },
  {
    "objectID": "ANOVA.html#多元配置分散分析p170",
    "href": "ANOVA.html#多元配置分散分析p170",
    "title": "\n9  分散分析\n",
    "section": "\n9.2 多元配置分散分析（P170）",
    "text": "9.2 多元配置分散分析（P170）\n統計量 - 平均 - 多元配置分散分析(Linux)AnovaModel.2 &lt;- lm(健康統制感 ~ 性別*年齢区分,\n                   data = PatientStress,\n                   contrasts = list(性別=contr.sum, 年齢区分=contr.sum))\ncar::Anova(AnovaModel.2)\ncar::Tapply(健康統制感 ~ 性別 + 年齢区分, mean, na.action = na.omit,\n            data = PatientStress) # means\ncar::Tapply(健康統制感 ~ 性別 + 年齢区分, sd, na.action = na.omit,\n            data = PatientStress) # std. deviations\nxtabs(~性別 + 年齢区分, data = PatientStress) # counts\n\n\n\nAnova Table (Type II tests)\n\nResponse: 健康統制感\n              Sum Sq  Df F value    Pr(&gt;F)    \n性別              11   1  0.0660    0.7974    \n年齢区分        4489   3  8.5936 1.653e-05 ***\n性別:年齢区分    973   3  1.8619    0.1359    \nResiduals      57291 329                      \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n\n    年齢区分\n性別     青年     壮年     中年      高年\n  男 91.82000 86.94737 90.31250  97.61111\n  女 88.65289 92.16667 91.91489 102.84615\n\n\n\n\n    年齢区分\n性別     青年     壮年     中年     高年\n  男 13.96013 13.17183 15.54689 15.03775\n  女 12.40478 11.41192 12.55220 13.52536\n\n\n\n\n    年齢区分\n性別 青年 壮年 中年 高年\n  男   50   19   32   18\n  女  121   24   47   26\n\n\n\n\n\n\n\n\n\nRcmdrのバグ\n\n\n\n\n\nLinux版のR Commanderにはバグがあるようで上記のコードに修正しないと動作しませんが、WindowsではR Commanderが出力する下記のコードで動作しますので修正は不要です。\n\n統計量 - 平均 - 多元配置分散分析(Windows)AnovaModel.2 &lt;- lm(健康統制感 ~ 性別*年齢区分, data=PatientStress,\n                   contrasts=list(性別 =\"contr.Sum\", 年齢区分 =\"contr.Sum\"))\ncar::Anova(AnovaModel.2)\n\ncar::Tapply(健康統制感 ~ 性別 + 年齢区分, mean, na.action=na.omit,\n            data=PatientStress) # means\ncar::Tapply(健康統制感 ~ 性別 + 年齢区分, sd, na.action=na.omit,\n            data=PatientStress) # std. deviations\nxtabs(~ 性別 + 年齢区分, data=PatientStress) # counts",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>分散分析</span>"
    ]
  },
  {
    "objectID": "linearModel.html",
    "href": "linearModel.html",
    "title": "\n10  回帰分析\n",
    "section": "",
    "text": "10.1 回帰モデルとは何か（P173）",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>回帰分析</span>"
    ]
  },
  {
    "objectID": "linearModel.html#回帰モデルの当てはめp179",
    "href": "linearModel.html#回帰モデルの当てはめp179",
    "title": "\n10  回帰分析\n",
    "section": "\n10.2 回帰モデルの当てはめ（P179）",
    "text": "10.2 回帰モデルの当てはめ（P179）\n\n10.2.1 線形回帰（P179）\n\n統計量 - モデルへの適合 - 線形回帰RegModel.1 &lt;- lm(ストレス反応~ストレッサー得点,\n                 data=PatientStress)\nsummary(RegModel.1)\n\n\nCall:\nlm(formula = ストレス反応 ~ ストレッサー得点, data = PatientStress)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-6.7497 -1.8334 -0.2208  1.7854  6.8829 \n\nCoefficients:\n                 Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)       3.55031    0.38024   9.337  &lt; 2e-16 ***\nストレッサー得点  0.22853    0.04806   4.755 2.95e-06 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.687 on 335 degrees of freedom\nMultiple R-squared:  0.06323,   Adjusted R-squared:  0.06044 \nF-statistic: 22.61 on 1 and 335 DF,  p-value: 2.949e-06\n\n\n\nモデル - 信頼医区間car::Confint(RegModel.1, level = 0.95)\n\n                  Estimate    2.5 %    97.5 %\n(Intercept)      3.5503052 2.802338 4.2982727\nストレッサー得点 0.2285298 0.133996 0.3230637\n\n\n\n\n\n\n\n\n相関\n\n\n\n\n\n\nグラフ - 散布図car::scatterplot(ストレス反応~ストレッサー得点, regLine=TRUE, smooth=FALSE,\n                 boxplots=FALSE, data=PatientStress)\n\n\n\n\n\n\n\n\n\n\n\n統計量 - モデルへの適合 - 線形回帰RegModel.2 &lt;- lm(ストレス反応~ストレッサー得点+健康統制感,\n                 data=PatientStress)\nsummary(RegModel.2)\n\n\nCall:\nlm(formula = ストレス反応 ~ ストレッサー得点 + \n    健康統制感, data = PatientStress)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-6.7488 -1.8323 -0.2206  1.7867  6.8849 \n\nCoefficients:\n                   Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)       3.5639982  1.0523008   3.387 0.000791 ***\nストレッサー得点  0.2285325  0.0481304   4.748 3.05e-06 ***\n健康統制感       -0.0001499  0.0107407  -0.014 0.988871    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.691 on 334 degrees of freedom\nMultiple R-squared:  0.06323,   Adjusted R-squared:  0.05762 \nF-statistic: 11.27 on 2 and 334 DF,  p-value: 1.83e-05\n\n\n統計量 - ブートストラップ信頼区間.bs.samples &lt;- car::Boot(RegModel.2, R=10000, method=\"case\")\n\n 要求されたパッケージ boot をロード中です \n\n統計量 - ブートストラップ信頼区間RcmdrMisc::plotBoot(.bs.samples)\nconfint(.bs.samples, level=0.95, type=\"bca\")\nremove(.bs.samples)\n\n\n\n\n\n\n\n\nBootstrap bca confidence intervals\n\n                      2.5 %     97.5 %\n(Intercept)       1.4209193 5.58505414\nストレッサー得点  0.1317427 0.32320132\n健康統制感       -0.0217321 0.02281559\n\n\n\n\n10.2.2 線形モデル（P189）\n\n統計量 - モデルへの適合 - 線形モデルLinearModel.1 &lt;- lm(ストレス反応 ~ 日常苛立ち, data = PatientStress)\nsummary(LinearModel.1)\n\n\nCall:\nlm(formula = ストレス反応 ~ 日常苛立ち, data = PatientStress)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-7.8138 -1.4475  0.0805  1.4749  6.0547 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   3.5251     0.2136  16.505  &lt; 2e-16 ***\n日常苛立ち1   1.5280     0.3257   4.691 3.97e-06 ***\n日常苛立ち3   2.5857     0.3469   7.453 7.94e-13 ***\n日常苛立ち6   4.2888     0.3720  11.528  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.32 on 333 degrees of freedom\nMultiple R-squared:  0.3056,    Adjusted R-squared:  0.2994 \nF-statistic: 48.85 on 3 and 333 DF,  p-value: &lt; 2.2e-16\n\n\n\nモデル - 信頼医区間car::Confint(LinearModel.1, level = 0.95)\n\n            Estimate     2.5 %   97.5 %\n(Intercept) 3.525073 3.1049506 3.945196\n日常苛立ち1 1.528018 0.8873007 2.168735\n日常苛立ち3 2.585738 1.9032632 3.268213\n日常苛立ち6 4.288765 3.5569210 5.020609\n\n\n\n統計量 - モデルへの適合 - 線形モデルLinearModel.2 &lt;- lm(ストレス反応 ~ ストレッサー得点 +健康統制感\n                    +日常苛立ち +性別 +年齢コード, data = PatientStress)\nsummary(LinearModel.2)\n\n\nCall:\nlm(formula = ストレス反応 ~ ストレッサー得点 + \n    健康統制感 + 日常苛立ち + 性別 + 年齢コード, \n    data = PatientStress)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-7.0228 -1.4035 -0.0337  1.5081  6.4263 \n\nCoefficients:\n                  Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)       1.249051   0.912855   1.368 0.172161    \nストレッサー得点  0.076017   0.041277   1.842 0.066433 .  \n健康統制感        0.021266   0.009091   2.339 0.019919 *  \n日常苛立ち1       1.308106   0.312272   4.189 3.61e-05 ***\n日常苛立ち3       2.172647   0.339295   6.403 5.28e-10 ***\n日常苛立ち6       3.592491   0.379275   9.472  &lt; 2e-16 ***\n性別女            0.804334   0.252173   3.190 0.001563 ** \n年齢コード2       0.082064   0.379132   0.216 0.828770    \n年齢コード3      -1.096353   0.310151  -3.535 0.000467 ***\n年齢コード4      -1.775304   0.394404  -4.501 9.41e-06 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.186 on 327 degrees of freedom\nMultiple R-squared:  0.3947,    Adjusted R-squared:  0.3781 \nF-statistic: 23.69 on 9 and 327 DF,  p-value: &lt; 2.2e-16",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>回帰分析</span>"
    ]
  },
  {
    "objectID": "linearModel.html#モデル診断p197",
    "href": "linearModel.html#モデル診断p197",
    "title": "\n10  回帰分析\n",
    "section": "\n10.3 モデル診断（P197）",
    "text": "10.3 モデル診断（P197）\nモデル - グラフ - 基本診断プロットoldpar &lt;- par(oma=c(0,0,3,0), mfrow=c(2,2))\nplot(LinearModel.2)\npar(oldpar)\n\n\n\n\n\n\n\n\nモデル - グラフ - Influence plotcar::influencePlot(LinearModel.2, id=list(method=\"noteworthy\", n=2))\n\n\n\n\n\n\n\n      StudRes        Hat        CookD\n18  -3.330199 0.04048919 0.0453974131\n74   3.033107 0.03689499 0.0343805895\n141  0.159330 0.06877515 0.0001880478\n271 -1.788174 0.06809605 0.0232092634\n\n\n\nモデル - グラフ - Component+residual plotscar::crPlots(LinearModel.2, smooth=list(span=0.5))\n\n\n\n\n\n\n\n\n10.3.1 数値によるモデル診断\nモデル - 数値による診断 - 分散拡大要因car::vif(LinearModel.2)\nround(cov2cor(vcov(LinearModel.2)), 3) # Correlations of parameter estimates\n\n\n\n                     GVIF Df GVIF^(1/(2*Df))\nストレッサー得点 1.114436  1        1.055669\n健康統制感       1.085463  1        1.041856\n日常苛立ち       1.209852  3        1.032259\n性別             1.024580  1        1.012215\n年齢コード       1.221009  3        1.033840\n\n\n\n\n                 (Intercept) ストレッサー得点 健康統制感 日常苛立ち1\n(Intercept)            1.000           -0.278     -0.886      -0.132\nストレッサー得点      -0.278            1.000     -0.041      -0.106\n健康統制感            -0.886           -0.041      1.000       0.001\n日常苛立ち1           -0.132           -0.106      0.001       1.000\n日常苛立ち3           -0.188           -0.132      0.071       0.425\n日常苛立ち6           -0.114           -0.264      0.047       0.403\n性別女                -0.186            0.058     -0.019      -0.022\n年齢コード2           -0.136            0.023     -0.002       0.100\n年齢コード3           -0.165            0.120     -0.042       0.119\n年齢コード4            0.076            0.044     -0.244       0.042\n                 日常苛立ち3 日常苛立ち6 性別女 年齢コード2 年齢コード3\n(Intercept)           -0.188      -0.114 -0.186      -0.136      -0.165\nストレッサー得点      -0.132      -0.264  0.058       0.023       0.120\n健康統制感             0.071       0.047 -0.019      -0.002      -0.042\n日常苛立ち1            0.425       0.403 -0.022       0.100       0.119\n日常苛立ち3            1.000       0.412 -0.035       0.100       0.168\n日常苛立ち6            0.412       1.000 -0.070       0.122       0.166\n性別女                -0.035      -0.070  1.000       0.093       0.087\n年齢コード2            0.100       0.122  0.093       1.000       0.284\n年齢コード3            0.168       0.166  0.087       0.284       1.000\n年齢コード4            0.131       0.185  0.068       0.226       0.301\n                 年齢コード4\n(Intercept)            0.076\nストレッサー得点       0.044\n健康統制感            -0.244\n日常苛立ち1            0.042\n日常苛立ち3            0.131\n日常苛立ち6            0.185\n性別女                 0.068\n年齢コード2            0.226\n年齢コード3            0.301\n年齢コード4            1.000\n\n\n\n\nモデル - 数値による診断 - ブルーシュ・ベーガンの分散の不均一性の検定lmtest::bptest(ストレス反応 ~ ストレッサー得点 + 健康統制感 \n               + 日常苛立ち + 性別 + 年齢コード,\n               varformula = ~ fitted.values(LinearModel.2),\n               studentize=TRUE, data=PatientStress)\n\n\n    studentized Breusch-Pagan test\n\ndata:  ストレス反応 ~ ストレッサー得点 + 健康統制感 +     日常苛立ち + 性別 + 年齢コード\nBP = 1.7599, df = 1, p-value = 0.1846\n\n\n\n10.3.2 複雑な線形モデルの回帰分析（P209）\n\n\n演算子*の場合\n演算子:の場合\n\n\n\n\n統計量 - モデルへの適合 - 線形モデルLinearModel.3 &lt;- lm(ストレス反応 ~ ストレッサー得点 * 性別 + \n                    健康統制感 + 日常苛立ち + 年齢コード,\n                    data = PatientStress)\nsummary(LinearModel.3)\n\n\nCall:\nlm(formula = ストレス反応 ~ ストレッサー得点 * \n    性別 + 健康統制感 + 日常苛立ち + 年齢コード, \n    data = PatientStress)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-7.0423 -1.3942 -0.0425  1.5039  6.4069 \n\nCoefficients:\n                         Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)              1.168445   0.968560   1.206 0.228548    \nストレッサー得点         0.090062   0.069412   1.297 0.195378    \n性別女                   0.960755   0.670401   1.433 0.152786    \n健康統制感               0.021024   0.009155   2.297 0.022280 *  \n日常苛立ち1              1.306828   0.312761   4.178 3.77e-05 ***\n日常苛立ち3              2.175033   0.339914   6.399 5.44e-10 ***\n日常苛立ち6              3.598807   0.380646   9.454  &lt; 2e-16 ***\n年齢コード2              0.082958   0.379693   0.218 0.827186    \n年齢コード3             -1.104739   0.312375  -3.537 0.000464 ***\n年齢コード4             -1.774085   0.395000  -4.491 9.84e-06 ***\nストレッサー得点:性別女 -0.021415   0.085020  -0.252 0.801293    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.189 on 326 degrees of freedom\nMultiple R-squared:  0.3948,    Adjusted R-squared:  0.3763 \nF-statistic: 21.27 on 10 and 326 DF,  p-value: &lt; 2.2e-16\n\n\n\n\n\n統計量 - モデルへの適合 - 線形モデルLinearModel.3 &lt;- lm(ストレス反応 ~ ストレッサー得点 + 性別 + ストレッサー得点:性別 + \n                    健康統制感 + 日常苛立ち + 年齢コード,\n                    data = PatientStress)\nsummary(LinearModel.3)\n\n\nCall:\nlm(formula = ストレス反応 ~ ストレッサー得点 + \n    性別 + ストレッサー得点:性別 + 健康統制感 + \n    日常苛立ち + 年齢コード, data = PatientStress)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-7.0423 -1.3942 -0.0425  1.5039  6.4069 \n\nCoefficients:\n                         Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)              1.168445   0.968560   1.206 0.228548    \nストレッサー得点         0.090062   0.069412   1.297 0.195378    \n性別女                   0.960755   0.670401   1.433 0.152786    \n健康統制感               0.021024   0.009155   2.297 0.022280 *  \n日常苛立ち1              1.306828   0.312761   4.178 3.77e-05 ***\n日常苛立ち3              2.175033   0.339914   6.399 5.44e-10 ***\n日常苛立ち6              3.598807   0.380646   9.454  &lt; 2e-16 ***\n年齢コード2              0.082958   0.379693   0.218 0.827186    \n年齢コード3             -1.104739   0.312375  -3.537 0.000464 ***\n年齢コード4             -1.774085   0.395000  -4.491 9.84e-06 ***\nストレッサー得点:性別女 -0.021415   0.085020  -0.252 0.801293    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.189 on 326 degrees of freedom\nMultiple R-squared:  0.3948,    Adjusted R-squared:  0.3763 \nF-statistic: 21.27 on 10 and 326 DF,  p-value: &lt; 2.2e-16",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>回帰分析</span>"
    ]
  },
  {
    "objectID": "linearModel.html#モデルの選択p212",
    "href": "linearModel.html#モデルの選択p212",
    "title": "\n10  回帰分析\n",
    "section": "\n10.4 モデルの選択（P212）",
    "text": "10.4 モデルの選択（P212）\n\n10.4.1 分散分析によるモデルの比較（P213）\n\nモデル - 仮設検定 - 2つのモデルを比較anova(LinearModel.1, LinearModel.2)\n\nAnalysis of Variance Table\n\nModel 1: ストレス反応 ~ 日常苛立ち\nModel 2: ストレス反応 ~ ストレッサー得点 + 健康統制感 + \n    日常苛立ち + 性別 + 年齢コード\n  Res.Df    RSS Df Sum of Sq      F    Pr(&gt;F)    \n1    333 1792.3                                  \n2    327 1562.3  6    230.01 8.0237 4.304e-08 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n\n\n\n\n\n誤植\n\n\n\n\n\nテキストのP214ではLinearModel.1はストレス反応 ~ ストレッサー得点になっておりP191から説明されているLinearModel.1（ストレス反応 ~ 日常苛立ち）とは異なっています。念のためにテキストP214と同様のモデルLinearModel.1.1を作成して比較します。\n\nモデル - 仮設検定 - 2つのモデルを比較LinearModel.1.1 &lt;- lm(ストレス反応 ~ ストレッサー得点, data = PatientStress)\nsummary(LinearModel.1.1)\n\n\nCall:\nlm(formula = ストレス反応 ~ ストレッサー得点, data = PatientStress)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-6.7497 -1.8334 -0.2208  1.7854  6.8829 \n\nCoefficients:\n                 Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)       3.55031    0.38024   9.337  &lt; 2e-16 ***\nストレッサー得点  0.22853    0.04806   4.755 2.95e-06 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.687 on 335 degrees of freedom\nMultiple R-squared:  0.06323,   Adjusted R-squared:  0.06044 \nF-statistic: 22.61 on 1 and 335 DF,  p-value: 2.949e-06\n\nモデル - 仮設検定 - 2つのモデルを比較anova(LinearModel.1.1, LinearModel.2)\n\nAnalysis of Variance Table\n\nModel 1: ストレス反応 ~ ストレッサー得点\nModel 2: ストレス反応 ~ ストレッサー得点 + 健康統制感 + \n    日常苛立ち + 性別 + 年齢コード\n  Res.Df    RSS Df Sum of Sq      F    Pr(&gt;F)    \n1    335 2417.9                                  \n2    327 1562.3  8    855.63 22.386 &lt; 2.2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\nP214と同じ結果を得ることができました。このような誤植がおきる原因としては分析結果をコピペして貼り付けていることが考えられます。このような状態は分析再現性が確保できていない状態と言えます。R Commander単体では分析再現性を確保することは困難ですが、Rとしては分析再現性を確保するための仕組みが用意されています。\n\n\n\n\nモデル - 仮設検定 - 2つのモデルを比較anova(LinearModel.2, LinearModel.3)\n\nAnalysis of Variance Table\n\nModel 1: ストレス反応 ~ ストレッサー得点 + 健康統制感 + \n    日常苛立ち + 性別 + 年齢コード\nModel 2: ストレス反応 ~ ストレッサー得点 + 性別 + ストレッサー得点:性別 + \n    健康統制感 + 日常苛立ち + 年齢コード\n  Res.Df    RSS Df Sum of Sq      F Pr(&gt;F)\n1    327 1562.3                           \n2    326 1562.0  1   0.30399 0.0634 0.8013\n\n\n\n10.4.2 AICによるモデル選択（P215）\n\nモデル - 逐次モデル選択…RcmdrMisc::stepwise(LinearModel.3, direction='backward/forward', criterion='AIC')\n\n\nDirection:  backward/forward\nCriterion:  AIC \n\nStart:  AIC=538.84\nストレス反応 ~ ストレッサー得点 + 性別 + ストレッサー得点:性別 + \n    健康統制感 + 日常苛立ち + 年齢コード\n\n                        Df Sum of Sq    RSS    AIC\n- ストレッサー得点:性別  1      0.30 1562.3 536.91\n&lt;none&gt;                               1562.0 538.84\n- 健康統制感             1     25.27 1587.3 542.25\n- 年齢コード             3    138.36 1700.4 561.44\n- 日常苛立ち             3    465.22 2027.2 620.69\n\nStep:  AIC=536.91\nストレス反応 ~ ストレッサー得点 + 性別 + 健康統制感 + \n    日常苛立ち + 年齢コード\n\n                        Df Sum of Sq    RSS    AIC\n&lt;none&gt;                               1562.3 536.91\n- ストレッサー得点       1     16.20 1578.5 538.38\n+ ストレッサー得点:性別  1      0.30 1562.0 538.84\n- 健康統制感             1     26.15 1588.5 540.50\n- 性別                   1     48.61 1610.9 545.23\n- 年齢コード             3    138.06 1700.4 559.44\n- 日常苛立ち             3    465.67 2028.0 618.82\n\n\n\nCall:\nlm(formula = ストレス反応 ~ ストレッサー得点 + \n    性別 + 健康統制感 + 日常苛立ち + 年齢コード, \n    data = PatientStress)\n\nCoefficients:\n     (Intercept)  ストレッサー得点            性別女        健康統制感  \n         1.24905           0.07602           0.80433           0.02127  \n     日常苛立ち1       日常苛立ち3       日常苛立ち6       年齢コード2  \n         1.30811           2.17265           3.59249           0.08206  \n     年齢コード3       年齢コード4  \n        -1.09635          -1.77530",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>回帰分析</span>"
    ]
  },
  {
    "objectID": "linearModel.html#解析結果の保存p219",
    "href": "linearModel.html#解析結果の保存p219",
    "title": "\n10  回帰分析\n",
    "section": "\n10.5 解析結果の保存（P219）",
    "text": "10.5 解析結果の保存（P219）\n\nモデル - 計算結果をデータとして保存PatientStress&lt;- within(PatientStress, {\n  fitted.LinearModel.3 &lt;- fitted(LinearModel.3)       # 予測値\n  residuals.LinearModel.3 &lt;- residuals(LinearModel.3) # 残渣\n  rstudent.LinearModel.3 &lt;- rstudent(LinearModel.3)   # スチューデント化残渣\n  hatvalues.LinearModel.3 &lt;- hatvalues(LinearModel.3) # ハット地（てこ比）\n  cooks.distance.LinearModel.3 &lt;- cooks.distance(LinearModel.3) # クックの距離\n  obsNumber &lt;- 1:nrow(PatientStress)                  # インデックス番号\n})\n\n\n保存結果はアクティブデータセットに追加されますので、必要に応じてデータセットを（save()関数を使用して）保存してください。",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>回帰分析</span>"
    ]
  },
  {
    "objectID": "tips.html",
    "href": "tips.html",
    "title": "Tips",
    "section": "",
    "text": "箱ひげ図のサマリを知る方法\nR Commanderの箱ひげ図（Boxplot()関数）は外れ値のインデックスを出力することは可能ですが、四分位数などの箱ひげ図に関するサマリを出力できません。\n[1] \"28\"  \"76\"  \"113\" \"115\" \"195\" \"311\" \"13\"  \"92\"  \"200\" \"209\" \"270\" \"291\"\n[13] \"308\" \"310\" \"312\" \"318\"\nそこで、サマリを関数の返り値として出力できるRの標準的箱ひげ図関数boxplot()関数を用います。ただし、サマリは非表示の返り値になっているためprint()関数を用いて明示的に出力する必要があります。\n$stats\n     [,1] [,2]\n[1,]  0.0    0\n[2,]  9.0   14\n[3,] 19.0   31\n[4,] 38.5   55\n[5,] 81.0  114\n\n$n\n[1] 119 218\n\n$conf\n         [,1]     [,2]\n[1,] 14.72727 26.61254\n[2,] 23.27273 35.38746\n\n$out\n [1]  97 113  86  87 107 113 156 131 139 126 140 124 141 148 126 142\n\n$group\n [1] 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2\n\n$names\n[1] \"男\" \"女\"",
    "crumbs": [
      "Tips"
    ]
  },
  {
    "objectID": "tips.html#箱ひげ図のサマリを知る方法",
    "href": "tips.html#箱ひげ図のサマリを知る方法",
    "title": "Tips",
    "section": "",
    "text": "グラフ - 箱ひげ図car::Boxplot(ストレス反応得点 ~ 性別, data = PatientStress)\n\n\n\n\n\n\n\n\nBoxplot()関数とboxplot()関数の関係\n\n\n\n\n\nR CommanderのBoxplot()関数はboxplot()関数のラッパー関数です。箱ひげ図自体の描画をboxplot()関数が担い、外れ値の特定処理をBoxplot()関数が担っています。ですのでboxplot()関数が出力する箱ひげ図はR Commanderで外れ値の特定を”No”に設定した場合と同一の出力になります。なお、Boxplot()関数は返り値を持っていないためprint()関数にかましても何も出力されません。\n\n\n\nprint()関数による出力print(boxplot(ストレス反応得点 ~ 性別, data = PatientStress))\n\nサマリの詳細\nboxplot()関数が出力するのはテューキーの箱ひげ図で、出力されるサマリは下表の通りです。\n\n\n返り値\n説明（返り値の内容）\n\n\n\nstats\n下ひげ極値1、四分位数2、上ひげ極値\n\n\nn\n（グループ毎の）データ数\n\n\nconf\n信頼区間3（\\(Q_2 \\pm 1.58 \\times \\frac{IQR}{\\sqrt n}\\)）\n\n\nout\n外れ値4（インデックスではなくデータの値）\n\n\ngroup\n外れ値が属するグループ\n\n\nnames\nグループ名（層別水準名）\n\n\n\n1 下／上ひげ極値とは閉区間\\(\\big[ Q_1 - 1.5 \\times IQR, Q_3 + 1.5 \\times IQR \\big]\\)の中で最も小さい／大きいデータの値です。閉区間の下限／上限値ではありません。2 四分位数はテューキーの四分位数（fivenum()関数で求めています）になります。3 95\\(\\%\\)信頼区間です。係数はソースでベタ打ちになっているため引数を用いて信頼区間を変更することはできません。4 外れ値は閉区間\\(\\big[ Q_1 - 1.5 \\times IQR, Q_3 + 1.5 \\times IQR \\big]\\)の外側にある値です。\n\n\n\n\n\nIQRの1.5倍の外側が外れ値になる理由\n\n\n\n\n\n閉区間の外側を外れ値とする理由は下図（正規分布における箱ひげ図）を見れば理解できると思います。\n\n\n出典:Wikipedia(en)\n\n\n\n\n\n\n\n\n\n\nサマリだけを出力する\n\n\n\n\n\n箱ひげ図を出力せずにサマリだけを出力したい場合はplot = FALSEを引数に指定します。\n\n返り値だけを出力するboxplot(ストレス反応得点 ~ 性別, data = PatientStress, plot = FALSE)\n\n$stats\n     [,1] [,2]\n[1,]  0.0    0\n[2,]  9.0   14\n[3,] 19.0   31\n[4,] 38.5   55\n[5,] 81.0  114\n\n$n\n[1] 119 218\n\n$conf\n         [,1]     [,2]\n[1,] 14.72727 26.61254\n[2,] 23.27273 35.38746\n\n$out\n [1]  97 113  86  87 107 113 156 131 139 126 140 124 141 148 126 142\n\n$group\n [1] 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2\n\n$names\n[1] \"男\" \"女\"\n\n\n返り値はリスト型変数なので$演算子を用いた参照で特定の値だけを出力することも可能です。\n\n特定の返り値だけを出力するboxplot(ストレス反応得点 ~ 性別, data = PatientStress, plot = FALSE)$stats\n\n     [,1] [,2]\n[1,]  0.0    0\n[2,]  9.0   14\n[3,] 19.0   31\n[4,] 38.5   55\n[5,] 81.0  114\n\n\n\n\n\n\n\n\n\n\n\n極値と閉区間の関係\n\n\n\n\n\n下図の青点線が男性の閉区間上限値、赤点線が女性の閉区間上限値、青緑の四角が各データになります。上ひげ極値は閉区間内にあるデータの最大値を取りますので必ずしも閉区間上限値と一致しないことが図から分かります。なお、閉区間下限値はマイナスになることから出力を省略しますが、下ひげ極値は男女ともに閉区間内にあるデータの最小値であるゼロになっていることが分かります。",
    "crumbs": [
      "Tips"
    ]
  },
  {
    "objectID": "tips.html#独立サンプルt検定",
    "href": "tips.html#独立サンプルt検定",
    "title": "Tips",
    "section": "独立サンプルt検定",
    "text": "独立サンプルt検定\n　R Commanderで独立サンプルt検定（独立標本t検定）を行う場合は、データセットがTidy data（整然データ）5という概念を満たしている必要があります。\n5 Wikipedia\n\n\n\n\n\nTidy data（整然データ）\n\n\n\n\n\n以下の条件を満たす表型のデータをTidy dataといい、構造と意味が合致しているのが特徴です。\n　1. 個々の変数が一つの列をなす\n　2. 個々の観測が一つの行をなす\n　3. 個々の値が一つのセルをなす\n　4. 個々の観測の構成単位の累計が一つの表をなす\nなので、神ExcelはTidy dataにはなりませんのでRでそのまま扱うことはできません。\n\n\n\n　Tidy dataの具体例としてはRに標準で組み込まれているsleepデータセットが挙げられます。sleepデータセットは二種類の睡眠薬の効果 (睡眠時間の増減) に関するデータです。\n\n\n\n  \n\n\n\n\nsleepデータセットを読み込む\n　R Commanderでsleepデータセットを読み込む手順は下記の通りです。\n\n［データ］-［パッケージ内のデータ］-［アタッチされたパッケージからデータセットを読み込む…］を実行する\n開かれたダイアログの［データセット名を入力：］欄にsleepと入力し\n［OK］ボタンをクリックする\n［データセット:］欄がsleepになっていることを確認する\n独立サンプルt検定の実行\n　R Commanderで読み込んだsleepデータセットに対する独立サンプルt検定を実行する手順は下記の通りです。この手順ではオプション指定を省略していますので、必要に応じてオプションを指定してください。\n\n［統計量］-［平均］-［独立サンプルt検定…］を実行する\n開かれたダイアログのグループがgroup、目的変数がextraになっていることを確認し\nダイアログの［OK］ボタンをクリックする\n独立サンプルt検定が実行される\n\n\n統計量 - 平均 - 独立サンプルt検定t.test(extra ~ group, alternative = \"two.sided\",\n       conf.level = .95, var.equal = FALSE, data = sleep)\n\n\n    Welch Two Sample t-test\n\ndata:  extra by group\nt = -1.8608, df = 17.776, p-value = 0.07939\nalternative hypothesis: true difference in means between group 1 and group 2 is not equal to 0\n95 percent confidence interval:\n -3.3654832  0.2054832\nsample estimates:\nmean in group 1 mean in group 2 \n           0.75            2.33",
    "crumbs": [
      "Tips"
    ]
  },
  {
    "objectID": "tips.html#対応のあるt検定",
    "href": "tips.html#対応のあるt検定",
    "title": "Tips",
    "section": "対応のあるt検定",
    "text": "対応のあるt検定\n　R Commanderで対応のあるt検定（関連のあるt検定、従属なt検定）を行うには、独立サンプルt検定で使ったデータセットとは異なり下記のような形式（ワイド形式）のデータセットが必要です。\n\n\n\n  \n\n\n\n\n\n\n\n\n\nロングからワイド形式への変換\n\n\n\n\n\n　R Commanderでこのような形式に変換する手順は下記の通りです。\n\nアクティブデータセットをsleepデータセットにする\n［データ］-［アクティブデータセット］ー［データセットのロングからワイド形式への変換］を実行する\n開かれたダイアログで\n\n被験者ID変数にIDを指定\n被験者内要因にgroupを指定\n出来事に応じて変化する変数にextraを指定\n無視する変数は無指定\n\n\nダイアログの［OK］ボタンをクリックする\n\nsleepデータセットがsleepWideデータセットに変換される\n\n\nデータ - アクティブデータセット - データセットのロングからワイド形式への変換sleepWide &lt;- RcmdrMisc::reshapeL2W(sleep,\n                                   within=\"group\",\n                                   id=\"ID\",\n                                   varying=\"extra\")\n\n\n\n\n\n\n\n\n\n\n\nワイドからロング形式への変換\n\n\n\n\n\n　R Commanderで上記の逆変換（ワイド-&gt;ロング）を変換する手順は下記の通りです。\n\nアクティブデータセットをsleepWideデータセットにする\n［データ］-［アクティブデータセット］ー［データセットのワイドからロング形式への変換］を実行する\n開かれたダイアログで\n\n［反復測定1因子］タブを選択する\n\nLevel-1でextra.1を選択する\n\nLevel-2でextra.2を選択する\n\n\nLevel-1ならびにLevel-2が元のgroupの値になります\n\n\n［Name for the within-subjects factor:］には任意の変数名を設定する\n\nこれが元のgroupに相当します\n\n\n\n\nダイアログの［OK］ボタンをクリックする\n\nsleepWideデータセットがsleepWideLongデータセットに変換される\n\n　データセット名などは［オプション］タブで指定してください。\n\nデータ - アクティブデータセット - データセットのワイドからロング形式への変換sleepWideLong &lt;- RcmdrMisc::reshapeW2L(sleepWide, within=\"trials\",\n                                       levels=list(trials=c(\"Level-1\", \"Level-2\")),\n                                       varying=list(response=c(\"extra.1\",\"extra.2\")),\n                                       id=\"id\")\n\n\n\n\n\n対応あるt検定の実行\n　ワイド形式のデータセットを準備し（ここでは上記のNoteの手順で作成したsleepWideデータセットを利用します）。対応のあるt検定を下記の手順で実行します。この手順ではオプション指定を省略していますので、必要に応じてオプションを指定してください。\n\n変換されたsleepWideデータセットをアクティブデータにする\n［統計量］-［平均］-［対応のあるt検定…］を実行する\n開かれだダイアログで\n\n第１の変数にextra.1を指定\n第２の変数にextra.2を指定\n\n\nダイアログの［OK］ボタンをクリックする\n対応のあるt検定が実行される\n\n\n統計量 - 平均 - 対応のあるt検定with(sleepWide, (t.test(extra.1, extra.2,\n                        alternative = \"two.sided\",\n                        conf.level = .95,\n                        paired=TRUE)))\n\n\n    Paired t-test\n\ndata:  extra.1 and extra.2\nt = -4.0621, df = 9, p-value = 0.002833\nalternative hypothesis: true mean difference is not equal to 0\n95 percent confidence interval:\n -2.4598858 -0.7001142\nsample estimates:\nmean difference \n          -1.58",
    "crumbs": [
      "Tips"
    ]
  },
  {
    "objectID": "tips.html#rにおけるt検定",
    "href": "tips.html#rにおけるt検定",
    "title": "Tips",
    "section": "Rにおけるt検定",
    "text": "Rにおけるt検定\n　R Commanderにおけるt検定は実行コードを見ればわかるようにすべてのt検定をt.test()というRの標準関数で行っています。t.test()関数は引数の指定で様々なt検定に対応しているからです。\n\nt.test()関数の引数## Default S3 method:\nt.test(x, y = NULL,            # 標本の指定\n       alternative = c(\"two.sided\", \"less\", \"greater\"),\n                               # 対立仮設の指定\n       mu = 0,                 # 平均値の（差の）指定\n       paired = FALSE,         # 独立か対応かの指定\n       var.equal = FALSE,      # 等分散か否かの指定\n       conf.level = 0.95, ...)\n\n## S3 method for class 'formula'\nt.test(formula,                # 標本の指定\n       data,                   # データセット名の指定\n       subset,                 # サブセットの指定\n       na.action,              # NAへの対処方法\n       alternative = c(\"two.sided\", \"less\", \"greater\"),\n                               # 対立仮設の指定\n       mu = 0,                 # 平均値の（差の）指定\n       paired = FALSE,         # 独立か対応かの指定\n       var.equal = FALSE,      # 等分散か否かの指定\n       conf.level = 0.95, ...)\n\n\n　指定方法には二通りありますが下側の’formula’形式を使うとTidy data（整然データ）を変形させずに引数の指定だけで四通りのt検定に対応できますので覚えておいて損はないかと思います。\n\n\nt検定の種類\nformula\npaired\nvar.equal\n\n\n\n1標本のt検定\nvalue ~ 1\nFALSE\nFALSE\n\n\nスチューデントのt検定6\n\nvalue ~ group\nFALSE\nTRUE\n\n\nウェルチのt検定7\n\nvalue ~ group\nFALSE\nFALSE\n\n\n対応のあるt検定\nvalue ~ group\nTRUE\nFALSE\n\n\n\n6 スチューデントのt検定とは二標本間でデータの母分散が等しいと仮定できるときに用いる検定手法です7 ウェルチのt検定とは二標本間でデータの母分散が等しいとは限らないときに用いる検定手法です\n\n\n\n\n\n対立仮設の指定方法\n\n\n\n\n\n　対立仮設（alternativeオプション）は\"two.sided\"、\"less\"、\"greater\"のどれかを指定します。デフォルトは\"two.sided\"（両側検定）です。\n1標本のt検定の場合\n　1標本のt検定の場合は標本の平均値（\\(\\mu\\)）と比較値（\\(\\mu_0\\)）に対する検定になります。\n\n\n対立仮設\n帰無仮設\n指定\n\n\n\n\\(\\mu \\neq \\mu_0\\)\n\\(\\mu = \\mu_0\\)\n\"two.sided\"\n\n\n\\(\\mu \\lt  \\mu_0\\)\n\\(\\mu \\ge \\mu_0\\)\n\"less\"\n\n\n\\(\\mu \\gt  \\mu_0\\)\n\\(\\mu \\le \\mu_0\\)\n\"greater\"\n\n\n独立サンプルt検定の場合\n　独立サンプルt検定の場合は各標本の平均値（\\(\\mu_x\\)と\\(\\mu_y\\)）に対する検定になります。\n\n\n対立仮設\n帰無仮設\n指定\n\n\n\n\\(\\mu_x \\neq \\mu_y\\)\n\\(\\mu_x =   \\mu_y\\)\n\"two.sided\"\n\n\n\\(\\mu_x \\lt  \\mu_y\\)\n\\(\\mu_x \\ge \\mu_y\\)\n\"less\"\n\n\n\\(\\mu_x \\gt  \\mu_y\\)\n\\(\\mu_x \\le \\mu_y\\)\n\"greater\"\n\n\n対応のあるt検定の場合\n　対応のあるt検定の場合は二標本の平均の差（\\(\\delta = \\mu_x - \\mu_y\\)）に対する検定になります。\n\n\n対立仮設\n帰無仮設\n指定\n\n\n\n\\(\\delta \\neq 0\\)\n\\(\\delta =   0\\)\n\"two.sided\"\n\n\n\\(\\delta \\lt  0\\)\n\\(\\delta \\ge 0\\)\n\"less\"\n\n\n\\(\\delta \\gt  0\\)\n\\(\\delta \\le 0\\)\n\"greater\"\n\n\n\n\n\n\n以上",
    "crumbs": [
      "Tips"
    ]
  },
  {
    "objectID": "webR/webR.html",
    "href": "webR/webR.html",
    "title": "Try boxplot()",
    "section": "",
    "text": "サンプルデータセット\nRに組み込まれているirisデータセットのSepal.Width（萼片の幅）をサンプルデータとして用います。",
    "crumbs": [
      "Try boxplot()"
    ]
  },
  {
    "objectID": "webR/webR.html#箱ひげ図とそのサマリ",
    "href": "webR/webR.html#箱ひげ図とそのサマリ",
    "title": "Try boxplot()",
    "section": "箱ひげ図とそのサマリ",
    "text": "箱ひげ図とそのサマリ\n　［Run Code］を順にクリックすることでRのコードを実行できます。\n　最初に箱ひげ図を描きます。\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n　次に描いた箱ひげ図のサマリを確認します。\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n\n\n返り値\n説明（返り値の内容）\n\n\n\nstats\n下ひげ極値、第一・二・三四分位点、上ひげ極値\n\n\nn\n（グループ毎の）データ数\n\n\nconf\n信頼区間（\\(Q_2 \\pm 1.58 \\times \\frac{IQR}{\\sqrt n}\\)）\n\n\nout\n外れ値（インデックスではなくデータの値）\n\n\ngroup\n外れ値が属するグループ番号\n\n\nnames\nグループ名（層別水準名）\n\n\n\n　次に下/上側極値、第一/第三四分位点、第二四分位点（中央値）（stats）が箱ひげ図の中でどの位置にあるのかを確認します。\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n　参考までに信頼区間（coef）を確認しておきます。\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n　下/上側極値、第一・二・三四分位点（stats）と五数要約（fivenum()）の関係を確認します。\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n　五数要約は「最小値, 第一四分位点, 第二四分位点（中央値）, 第三四分位点, 最大値」を求めるものですが、R Commanderにある要約統計量（numSummary()による分位数）とは異なる値になる場合がありますので注意が必要です。\n　最後に\\(Q_{1/4} - 1.5 \\times IQR, Q_{3/4} + 1.5 \\times IQR\\)とひげの位置を確認します。\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n　以上よりRにおける箱ひげ図（boxplot()）では、ひげが必ずしも\\(Q_{1/4} - 1.5 \\times IQR, Q_{3/4} + 1.5 \\times IQR\\)と一致しない場合があることが分かります。",
    "crumbs": [
      "Try boxplot()"
    ]
  }
]
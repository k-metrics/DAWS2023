> **※本ページの内容はテキストの第４章に相当します**

```{r setup, include=FALSE}
source("./R/setup.R")
```


# 始める前に
　データ分析を始める前に使用するデータについて把握しておきましょう。データは[テキスト特設サイト](https://bluebacks.kodansha.co.jp/books/9784065318164/appendix/)からダウンロードしておきます。

:::{.callout-note collapse="true"}
## テキスト特設サイト
[https://bluebacks.kodansha.co.jp/books/9784065318164/appendix/](https://bluebacks.kodansha.co.jp/books/9784065318164/appendix/)にあるデータはWindows用とmacOS用がありますので、利用環境に合わせてダウンロードしてください。
:::


## 使用するデータの内容
　テキストでは使用するデータのファイル名が明記されていませんが「外来患者ストレス.RData」が説明に該当するデータセットです。ただし、実際には説明と異なる順番で変数が並んでいたり説明にない変数が含まれていますので説明に合わせたデータセットを用意しました。
```{r, echo=FALSE, eval=FALSE}
load("./SampleFiles/外来患者ストレス.RData")
PatientStressKai <- PatientStress %>% 
  dplyr::select(`性別`,
                `年齢`,
                `ストレッサー得点`,
                `日常苛立ちごと`,
                `健康統制感`,
                `ストレス反応得点`,
                `ノンコンプライアンス行動数`,
                `年齢区分`,
                `年齢コード`,
                `年齢コード3`,
                `日常苛立ち`,
                `ストレス反応`,
                `ノンコンプライアンス`)
PatientStressKai
save(PatientStressKai, file = "./SampleFiles/外来患者ストレス改.RData")


PatientStressNew <- PatientStress %>% 
  dplyr::select(`性別`,
                `年齢`,
                `年齢区分`,
                `年齢コード`,
                `年齢コード3`,
                `ストレッサー得点`,
                `日常苛立ちごと`,
                `日常苛立ち`,
                `健康統制感`,
                `ストレス反応得点`,
                `ストレス反応`,
                `ノンコンプライアンス行動数`,
                `ノンコンプライアンス`)
PatientStressNew
save(PatientStressNew, file = "./SampleFiles/外来患者ストレス新.RData")
```
```{r, echo=FALSE}
load("./SampleFiles/外来患者ストレス改.RData")
PatientStressKai %>% df_print()
```

### ノンカテゴリカル変数部
　調査結果（生データ）。
```{r, echo=FALSE}
tibble::tribble(
  ~`変数名`,                    ~`尺度`,　~`説明`, 
  "性別",                       "名義", "生物学的性別（男:1,女:2）",
  "年齢",                       "比例", "調査時の年齢",
  "ストレッサー得点",           "間隔", "回答を得点(数値)化したもの",
  "日常苛立ちごと",             "間隔", "回答を得点(数値)化したもの",
  "健康統制感",                 "順序", "回答を得点(数値)化したもの",
  "ストレス反応得点",           "順序", "測定結果を得点(数値)化したもの",
  "ノンコンプライアンス行動数", "間隔", "回答をゼロイチ化したものの合計",
) %>% 
  df_print()
```

### カテゴリカル変数部
　各測定結果を任意の水準でカテゴライズ（因子化）したもの。
```{r, echo=FALSE}
tibble::tribble(
  ~`変数名`,                    ~`尺度`,　~`説明`, 
  "年齢区分",                   "順序", "年齢を文字カテゴリ化したもの",
  "年齢コード",                 "順序", "年齢を数字カテゴリ化したもの",
  "年齢コード3",                "順序", "年齢を数字カテゴリ化したもの",
  "日常苛立ち",                 "順序", "上記を数字カテゴリ化したもの",
  "ノンコンプライアンス",       "名義", "上記を文字カテゴリ化したもの",
  "ストレス反応",               "順序", "上記の平方根変換したもの"
) %>% 
  df_print()
```



```{r, echo=FALSE}
tibble::tribble(
  ~`変数名`,                    ~`尺度`,　~`説明`, 
  "性別",                       "名義", "生物学的性別（男:1,女:2）",
  "年齢",                       "比例", "調査時の年齢",
  "年齢区分",                   "順序", "年齢を文字カテゴリ化したもの",
  "年齢コード",                 "順序", "年齢を数字カテゴリ化したもの",
  "年齢コード3",                "順序", "年齢を数字カテゴリ化したもの",
  "ストレッサー得点",           "間隔", "回答を得点(数値)化したもの",
  "日常苛立ちごと",             "間隔", "回答を得点(数値)化したもの",
  "日常苛立ち",                 "順序", "上記を数字カテゴリ化したもの",
  "健康統制感",                 "順序", "回答を得点(数値)化したもの",
  "ストレス反応得点",           "順序", "測定結果を得点(数値)化したもの",
  "ストレス反応",               "順序", "上記の平方根変換したもの",
  "ノンコンプライアンス行動数", "間隔", "回答をゼロイチ化したものの合計",
  "ノンコンプライアンス",       "名義", "上記を文字カテゴリ化したもの"
) %>% 
  df_print()
```

　ここで、「因子」と記載していあるのはテキストの説明におけるカテゴリ化を意味しています。


## 変数の種類

### 尺度

[変数の尺度](https://bellcurve.jp/statistics/course/1562.html)

尺度     | 意味                                      | 例
---------|-------------------------------------------|---------------
名義尺度 | 値は同じか否かの意味しかない（カテゴリ）  | 性別、背番号
順序尺度 | 上記に加えて値の大小関係に意味があるが値の差に意味はない | ランキング、級
間隔尺度 | 値の差に意味があり、0(zero)は相対的な意味を持つが値の比に意味はない | 温度、偏差値
比例尺度 | 上記に加えて0(zero)は絶対的な意味を持ち値の比に意味がある | 金額、身長・体重


尺度     | 変数区分 | 意味
---------|----------|--------------------------------------------------------
名義尺度 | 質的変数 | 区別するための名称（カテゴリ）
順序尺度 | 質的変数 | 順序や大小には意味があるが間隔には意味がないもの
間隔尺度 | 量的変数 | 0が相対的な意味を持ち等間隔であり間隔に意味があるもの
比例尺度 | 量的変数 | 0が絶対的な意味を持ち間隔と比率に意味があるもの


#### 名義尺度

#### 順序尺度

#### 間隔尺度

#### 比例尺度（比尺度）


## データ解析の流れ

1. 一変数単位での要約統計量と分布の確認
1. 二変数単位での相関の確認
1. 二変数以上の変数間の関係を表すモデルの作成



---
